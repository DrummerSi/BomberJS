function checkPermissionType(e){return Permission.READ==e?"R":Permission.WRITE==e?"W":null}function App42Exception(e,t){this.name="App42Exception";var n;""==e?n=t+" parameter can not be blank":null==e?n=t+" parameter can not be null":"PaymentStatus"==e?n="Invalid Status ("+t+"). Could be either AUTHORIZED or UNAUTHORIZED or DECLINED":"DeviceType"==e?n="Invalid device ("+t+"). Could be either ANDROID or WP7 or iOS or NokiaX":"FileType"==e?n="Invalid fileType ("+t+").Could be either AUDIO or VIDEO or IMAGE or BINARY or TXT or XML or CSV or JSON or OTHER":"ActivityName"==e?n="Activity with the name [ "+t+" ] Is Already Ended":e!=t&&(n=t+" address is not valid"),n=n,this.message=n||""}function getODataUTCDateFilter(e){var t,n=(e.getUTCMonth()+1).toString();t=1==n.length?"0"+n:n;var o,s=e.getUTCDate().toString();o=1==s.length?"0"+s:s;var r="";return r+=e.getUTCFullYear()+"-",r+=t+"-",r+=o,r+="T"+e.getUTCHours()+":",r+=e.getUTCMinutes()+":",r+=e.getUTCSeconds()+".",r+=e.getUTCMilliseconds(),r+="Z"}function sortAssoc(e){var t=[];for(var n in e)t.push([n,e[n]]);t.sort(function(e,t){return e[0]>t[0]?-1:e[0]<t[0]?1:0});for(var o="",s=[],r=t.length-1;r>=0;r--)s[t[r][0]]=t[r][1],o+=t[r][0]+t[r][1];return o}function createCORSRequest(e,t,n,o,s,r,a,i,p,l,u,c){var d=createXMLHTTPObject(),h=!0;void 0!=a._asyncType&&0==a._asyncType&&(h=!1),d.open(e,t,h),d.setRequestHeader("Accept","application/json"),d.setRequestHeader("signature",o),("POST"==e||"PUT"==e)&&d.setRequestHeader("Content-Type","application/json");for(var v in c){var f=c[v];d.setRequestHeader(v.toString(),f)}d.onreadystatechange=function(){if(4==d.readyState)if(200==d.status){if(1==sessionRequest){sessionRequest=!1;var e=JSON.parse(d.responseText);if(void 0!=e.app42.response.users){var t=e.app42.response.users.user.sessionId;void 0!=localStorage&&localStorage.setItem("_App42_SessionId",t)}}if(1==sessionInvalidate){sessionInvalidate=!1;var n=JSON.parse(d.responseText),o=n.app42.response.success;o&&localStorage.removeItem("_App42_SessionId")}a.success(d.responseText)}else 200!=d.status&&a.error(d.responseText)},d.send(r)}function multipartCORSRequest(e,t,n,o,s,r,a,i,p,l,u,c,d){var h=new FormData;null!=r.userName&&h.append("userName",r.userName),null!=r.docId?(h.append("attachment",a),h.append("name",r.name),h.append("type",r.type),h.append("docId",r.docId)):null!=r.json&&(h.append("attachment",a),h.append("name",r.name),h.append("type",r.type),h.append("jsonDoc",r.json)),null!=r.type?(h.append("uploadFile",a),h.append("name",r.name),h.append("type",r.type),h.append("description",r.description)):null!=r.itemId?(h.append("imageFile",a),h.append("name",r.name),h.append("itemId",r.itemId),h.append("description",r.description),h.append("price",r.price)):null!=r.avatarName?(h.append("createAvatar",a),h.append("avatarName",r.avatarName),h.append("userName",r.userName),h.append("description",r.description)):null!=r.displayName?(h.append("uploadFile",a),h.append("name",r.name),h.append("displayName",r.displayName),h.append("description",r.description),h.append("tag",r.tag)):null!=r.accessToken?null!=r.userId?(h.append("uploadFile",a),h.append("name",r.name),h.append("accessToken",r.accessToken),h.append("userId",r.userId),h.append("message",r.message)):(h.append("uploadFile",a),h.append("name",r.name),h.append("accessToken",r.accessToken),h.append("message",r.message)):(h.append("imageFile",a),h.append("name",r.name),h.append("height",r.height),h.append("width",r.width),h.append("x",r.x),h.append("y",r.y),h.append("percentage",r.percentage),h.append("formatToConvert",r.formatToConvert)),__createMultipartCORSRequest(e,t,o,h,i,d)}function multipartCORSRequestForPhoto(e,t,n,o,s,r,a,i,p,l,u,c,d){var h=new FormData;h.append("imageFile",a),h.append("userName",r.userName),h.append("albumName",r.albumName),h.append("name",r.name),h.append("description",r.description),__createMultipartCORSRequest(e,t,o,h,i,d)}function __createMultipartCORSRequest(e,t,n,o,s,r){var a=createXMLHTTPObject();a.open(e,t,!0),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("signature",n);for(var i in r){var p=r[i];a.setRequestHeader(i.toString(),p)}a.onreadystatechange=function(){4==a.readyState&&(200==a.status?s.success(a.responseText):200!=a.status&&s.error(a.responseText))},a.send(o)}function createXMLHTTPObject(){for(var e=!1,t=0;t<XMLHttpFactories.length;t++){try{e=XMLHttpFactories[t]()}catch(n){continue}break}return e}function pair(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function guid(){return pair()+pair()+"-"+pair()+"-"+pair()+"-"+pair()+"-"+pair()+pair()+pair()}function App42Event(){App42Service.call(this);var e=this,t="ERROR IN ACCESSING EVENT SERVICE CLASS :: Set App42.enableEventService True To Access EventService Members.",n='{"app42":{"response":{"success":true}}}';this.trackEvent=function(e,o,s){if(0==unlockEventService)return void console.warn(t);if(""==e||null==e||void 0==e)return void App42Fault.throwExceptionIfNullOrBlank(e,"Event Name");var r=s;e=e.toUpperCase(),this.trackEventInternal(e,o,{success:function(e){var t=JSON.parse(e),o=t.app42.response.event.lastCommunicatedAt,s=t.app42.response.event.name;eventTypeObj=t.app42.response.event.type,__Local._saveKey(_Keys._app42_lastCommAt_+s,o),__Local._saveKey(_Keys._app42_lastCommAt_super,o),r.success(n),App42InAppMessaging.isInAppEnable&&App42InAppCommunicator.sendEvent(eventTypeObj,s)},error:function(e){r.error(e)}})},this.trackEventInternal=function(t,n,o){var s=App42.EventURL("event"),r=e.populateSignParams(),a=e.populateMetaHeaderParams(),i=__merge(r,a),p={};p.eventName=t,p.app42_lastCommunicatedAt=__Local._checkKey(_Keys._app42_lastCommAt_+t),""!=__Local._checkKey(_Keys._app42_lastUserUpdatedOn_+App42.getLoggedInUser())&&(p.app42_userUpdatedOn=__Local._checkKey(_Keys._app42_lastUserUpdatedOn_+App42.getLoggedInUser())),p.superProperties=App42EventHandler.getDefaultDeviceProps(),""!=App42EventHandler.getOldInstallProperties()&&(p.installProperties=App42EventHandler.getOldInstallProperties()),p.userProperties=n;var l='{"app42":{"event":'+JSON.stringify(p)+"}}";r.body=l,App42Connection.post(s,r,l,o,i)},this.startActivity=function(e,o,s){if(0==unlockEventService)return void console.warn(t);if(""==e||null==e)return void App42Fault.throwExceptionIfNullOrBlank(e,"Activity Name");var r=s;e=e.toUpperCase(),startActivityInternal(e,o,{success:function(e){var t=JSON.parse(e),o=t.app42.response.event.lastCommunicatedAt,s=t.app42.response.event.name;__Local._saveKey(_Keys._app42_lastCommAt_start_+s,o),__Local._saveKey(_Keys._app42_lastCommAt_super,o),r.success(n)},error:function(e){r.error(e)}})},startActivityInternal=function(t,n,o){var s=App42.EventURL("event/session"),r=e.populateSignParams(),a=e.populateMetaHeaderParams(),i=__merge(r,a),p={};p.eventName=t,p.action="START",p.app42_lastCommunicatedAt=__Local._checkLastCommAt(_Keys._app42_lastCommAt_end_+t,_Keys._app42_lastCommAt_start_+t),""!=__Local._checkKey(_Keys._app42_lastUserUpdatedOn_+App42.getLoggedInUser())&&(p.app42_userUpdatedOn=__Local._checkKey(_Keys._app42_lastUserUpdatedOn_+App42.getLoggedInUser())),p.superProperties=App42EventHandler.getDefaultDeviceProps(),""!=App42EventHandler.getOldInstallProperties()&&(p.installProperties=App42EventHandler.getOldInstallProperties()),p.userProperties=n;var l='{"app42":{"event":'+JSON.stringify(p)+"}}";r.body=l,App42Connection.post(s,r,l,o,i)},this.endActivity=function(e,o,s){if(0==unlockEventService)return void console.warn(t);if(""==e||null==e)return void App42Fault.throwExceptionIfNullOrBlank(e,"Activity Name");if(e=e.toUpperCase(),""==__Local._checkKey(_Keys._app42_lastCommAt_start_+e)){incrementCounter();return void s.error(new App42Exception("ActivityName",e))}var r=s;endActivityInternal(e,o,{success:function(e){var t=JSON.parse(e),o=t.app42.response.event.lastCommunicatedAt,s=t.app42.response.event.name;__Local._saveKey(_Keys._app42_lastCommAt_end_+s,o),__Local._removeKey(_Keys._app42_lastCommAt_start_+s),__Local._saveKey(_Keys._app42_lastCommAt_super,o),r.success(n)},error:function(e){r.error(e)}})},endActivityInternal=function(t,n,o){var s=App42.EventURL("event/session"),r=e.populateSignParams(),a=e.populateMetaHeaderParams(),i=__merge(r,a);o._asyncType=!1;var p={};p.eventName=t,p.action="END",p.app42_lastCommunicatedAt=__Local._checkKey(_Keys._app42_lastCommAt_start_+t),""!=__Local._checkKey(_Keys._app42_lastUserUpdatedOn_+App42.getLoggedInUser())&&(p.app42_userUpdatedOn=__Local._checkKey(_Keys._app42_lastUserUpdatedOn_+App42.getLoggedInUser())),p.superProperties=App42EventHandler.getDefaultDeviceProps(),""!=App42EventHandler.getOldInstallProperties()&&(p.installProperties=App42EventHandler.getOldInstallProperties()),p.userProperties=n;var l='{"app42":{"event":'+JSON.stringify(p)+"}}";r.body=l,App42Connection.post(s,r,l,o,i)},this.setLoggedInUserProperties=function(e,o){if(0==unlockEventService)return void console.warn(t);var s=o;setLoggedInUserPropertiesInternal(e,{success:function(t){console.log("Success message : "+t);var o=JSON.parse(t),r=o.app42.response.user.app42_userUpdatedOn,a=o.app42.response.user.hasProperties,i=o.app42.response.user.installProperties;"true"==a?__Local._saveKey(_Keys._app42_oldUserProps_+App42.getLoggedInUser(),JSON.stringify(i)):__Local._saveKey(_Keys._app42_oldUserProps_+App42.getLoggedInUser(),JSON.stringify(e)),null!=r&&__Local._saveKey(_Keys._app42_lastUserUpdatedOn_+App42.getLoggedInUser(),r),s.success(n)},error:function(e){s.error(e)}})},setLoggedInUserPropertiesInternal=function(t,n){var o=App42.EventURL("event/userproperties"),s=e.populateSignParams(),r=e.populateMetaHeaderParams(),a=__merge(s,r),i={};i.app42_installAt=__Local._checkKey(_Keys._app42_isAppInstalled),i.installProperties=t;var p='{"app42":{"event":'+JSON.stringify(i)+"}}";s.body=p,App42Connection.post(o,s,p,n,a)},this.updateLoggedInUserProperties=function(e,o){if(0==unlockEventService)return void console.warn(t);var s=o;updateLoggedInUserPropertiesInternal(e,{success:function(e){var t=JSON.parse(e),o=t.app42.response.user.app42_userUpdatedOn,r=t.app42.response.user.hasProperties,a=t.app42.response.user.installProperties;"true"==r&&__Local._saveKey(_Keys._app42_oldUserProps_+App42.getLoggedInUser(),JSON.stringify(a)),null!=o&&__Local._saveKey(_Keys._app42_lastUserUpdatedOn_+App42.getLoggedInUser(),o),s.success(n)},error:function(e){s.error(e)}})},updateLoggedInUserPropertiesInternal=function(t,n){var o=App42.EventURL("event/updateuserproperties"),s=e.populateSignParams(),r=e.populateMetaHeaderParams(),a=__merge(s,r),i={};i.app42_installAt=__Local._checkKey(_Keys._app42_isAppInstalled),i.app42_lastCommunicatedAt=__Local._checkKey(_Keys._app42_lastCommAt_super),i.installProperties=t,i.app42_userUpdatedOn=__Local._checkKey(_Keys._app42_lastUserUpdatedOn_+App42.getLoggedInUser()),i.oldProperties=App42EventHandler.getOldInstallProperties();var p='{"app42":{"event":'+JSON.stringify(i)+"}}";s.body=p,App42Connection.post(o,s,p,n,a)},this.getLoggedInUserProperties=function(t){var n=App42.EventURL("event/userproperties"),o=e.populateSignParams(),s=e.populateMetaHeaderParams(),r=__merge(o,s),a={},i={};a.app42_installAt=__Local._checkKey(_Keys._app42_isAppInstalled),a.installProperties=i;var p='{"app42":{"event":'+JSON.stringify(a)+"}}";o.body=p,App42Connection.post(n,o,p,t,r)},this.getConfig=function(t){var n=App42.EventURL("event"),o=e.populateSignParams(),s=e.populateMetaHeaderParams(),r=__merge(o,s);App42Connection.get(n,o,t,null,r)},this.isAvailable=function(t,n){var o=App42.EventURL("event/isAvailable"),s=e.populateSignParams(),r=e.populateMetaHeaderParams(),a=__merge(s,r),i={},p={};p.campaign=t,i.campaigns=p;var l='{"app42":'+JSON.stringify(i)+"}";s.body=l,App42Connection.post(o,s,l,n,a)}}function incrementCounter(){return counter+1}function decrementCounter(){return counter-1}function _fireApp42AppInstallEvent(e,t){var n=new App42Event,o="Install",s={};n.trackEventInternal(o,s,{success:function(e){var t=JSON.parse(e),n=t.app42.response.event.lastCommunicatedAt;__Local._saveKey(_Keys._app42_isAppInstalled,n),__Local._saveKey(_Keys._app42_lastCommAt_super,n);var o={app42_installAt:n,app42_lastCommunicatedAt:n};App42EventHandler.updateDeviceStatus(o)},error:function(e){}})}function clean_hex(e,t){e=e.toUpperCase(),t&&(e=e.replace(/0x/gi,""));var n=e;return e=e.replace(/[^A-Fa-f0-9]/g,""),n!=e&&alert("Warning! Non-hex characters in input string ignored."),e}function binary_to_base64(e){for(var t=new Array,n=0,o=0,s=new Array(3),r=new Array(4),a=e.length,i=0;a--;)if(s[n++]=e[i++],3==n){for(r[0]=(252&s[0])>>2,r[1]=((3&s[0])<<4)+((240&s[1])>>4),r[2]=((15&s[1])<<2)+((192&s[2])>>6),r[3]=63&s[2],n=0;4>n;n++)t+=base64_chars.charAt(r[n]);n=0}if(n){for(o=n;3>o;o++)s[o]=0;for(r[0]=(252&s[0])>>2,r[1]=((3&s[0])<<4)+((240&s[1])>>4),r[2]=((15&s[1])<<2)+((192&s[2])>>6),r[3]=63&s[2],o=0;n+1>o;o++)t+=base64_chars.charAt(r[o]);for(;n++<3;)t+="="}return t}function Convert(e){var t=clean_hex(e,!1);if(t.length%2)return alert("Error: cleaned hex string length is odd."),document.frmConvert.base64.value="",!1;for(var n=new Array,o=0;o<t.length/2;o++){var s=t.substr(2*o,2);n[o]=parseInt(s,16)}return binary_to_base64(n)}function App42Service(){var e,t,n,o,s=null,r=null,a=null,i=null,p=null,l=[],u=-1,c=-1,d={},h=null;this.setPageOffset=function(e){u=e},this.getPageOffset=function(){return u},this.setPageMaxRecords=function(e){c=e},this.getPageMaxRecords=function(){return c},this.setOtherMetaHeaders=function(e){d=e},this.getOtherMetaHeaders=function(){return d},this.setSessionId=function(e){s=e},this.getSessionId=function(){return s},this.getDbName=function(){return e},this.setDbName=function(t){e=t},this.getCollectionName=function(){return t},this.setCollectionName=function(e){t=e},this.setQuery=function(o,s){e=App42.getDbName(),t=o,n=s?getStr(s):null},this.addJSONObject=function(n,s){e=App42.getDbName(),t=n,o=JSON.stringify(s)},this.setModuleEvent=function(e){e=e},this.getEvent=function(){return h},this.setAdminKey=function(e){r=e},this.getAdminKey=function(){return r},this.setFbAccessToken=function(e){a=e},this.getFbAccessToken=function(){return a},this.setGeoTag=function(e){if(e instanceof GeoTag){var t={};null!=e.getLat()&&null!=e.getLng()&&(t.lat=e.getLat(),t.lng=e.getLng(),i=t)}},this.getGeoTag=function(){return i},this.setAclList=function(e){var t,n=new Array;if(e instanceof Array)for(var o=0;o<e.length;o++){var s,r=e[o].user;t={},s=e[o].permission,t[r]=s,n.push(t)}else{t={};var a,i=e.user;a=e.permission,t[i]=a,n.push(t)}p=n},this.getAclList=function(){return p},this.setSelectKeys=function(e){l=e},this.getSelectKeys=function(){return l},this.populateSignParams=function(){var e={};e.apiKey=apiKey,e.version=version;var t=new Date;if(e.timeStamp=getODataUTCDateFilter(t),null!=s&&(e.sessionId=s),null!=r&&(e.adminKey=r),null!=a&&(e.fbAccessToken=a),void 0!=localStorage&&null==s&&void 0!=localStorage.getItem("_App42_SessionId")){var n=localStorage.getItem("_App42_SessionId");e.sessionId=n}if(void 0!=localStorage&&null==a&&void 0!=localStorage.getItem("_App42_FbAccessToken")){var o=localStorage.getItem("_App42_FbAccessToken");e.fbAccessToken=o}return null!=h&&""!=h&&(e.event=h),e},this.populateMetaHeaderParams=function(){var s={};if(null!=p){var r=JSON.stringify(p);s.dataACL=r}if(-1==u||isNaN(c)||(s.pageOffset=u),-1==c||isNaN(c)||(s.pageMaxRecords=c),null!=i&&"[object Object]"==Object.prototype.toString.call(i)){var a=JSON.stringify(i);s.geoTag=a}if(l.length>0){for(var h={},v=0;v<l.length;v++)h[l[v]]="1";var f=JSON.stringify(h);s.selectKeys=f}if(Object.keys(d).length>0)for(var y in d){var m=d[y];null!=y&&""!=y&&null!=m&&""!=m&&(s[y]=m)}if(void 0!=localStorage&&void 0!=localStorage.getItem("_App42_DeviceId")){var g=localStorage.getItem("_App42_DeviceId");s.deviceId=g}if(null!=App42.getLoggedInUser()&&""!=App42.getLoggedInUser()&&(s.loggedInUser=App42.getLoggedInUser()),null!=n&&""!=n&&(s.metaQuery=n),null!=o&&""!=o&&(s.jsonObject=o),null!=e&&""!=e&&null!=t&&""!=t){var R=new Object;R.dbName=e,R.collectionName=t,s.dbCredentials=JSON.stringify(R)}return s.SDKName="javascript",s}}function GeoTag(){var e=null,t=null;this.setLat=function(t){e=t},this.getLat=function(){return e},this.setLng=function(e){t=e},this.getLng=function(){return t}}function ItemData(){var e=null,t=null,n=null,o=null,s=null,r=null;this.getItemId=function(){return e},this.setItemId=function(t){e=t},this.getName=function(){return t},this.setName=function(e){t=e},this.getDescription=function(){return n},this.setDescription=function(e){n=e},this.getImage=function(){return o},this.setImage=function(e){o=e},this.getPrice=function(){return s},this.setPrice=function(e){s=e},this.getImageName=function(){return r},this.setImageName=function(e){r=e}}function __merge(e,t){var n={};for(var o in e)n[o]=e[o];for(var o in t)n[o]=t[o];return n}function checkOrderByType(e){return OrderByType.ASCENDING==e?"ASCENDING":OrderByType.DESCENDING==e?"DESCENDING":App42Exception}function App42Storage(){App42Service.call(this);var e=this;this.insertJSONDocument=function(t,n,o,s){var r=App42.URL("storage/insert/dbName/"+t+"/collectionName/"+n);if(null!=t&&null!=n&&null!=o&&(t=t.trim(),n=n.trim()),""==t||""==n||""==o||null==t||null==n||null==o)return App42Fault.throwExceptionIfNullOrBlank(t,"dbName"),App42Fault.throwExceptionIfNullOrBlank(n,"collectionName"),void App42Fault.throwExceptionIfNullOrBlank(o,"json");var a=e.populateSignParams(),i=e.populateMetaHeaderParams(),p=__merge(a,i);a.dbName=t,a.collectionName=n,o instanceof Object&&(o=JSON.stringify(o));var l='{"app42":{"storage":{"jsonDoc":'+o+"}}}";a.body=l,App42Connection.post(r,a,l,s,p)},this.findAllDocuments=function(t,n,o){if(null!=t&&null!=n&&(t=t.trim(),n=n.trim()),""==t||""==n||null==t||null==n)return App42Fault.throwExceptionIfNullOrBlank(t,"dbName"),void App42Fault.throwExceptionIfNullOrBlank(n,"collectionName");var s=App42.URL("storage/findAll/dbName/"+t+"/collectionName/"+n),r=e.populateSignParams(),a=e.populateMetaHeaderParams(),i=__merge(r,a);r.dbName=t,r.collectionName=n,App42Connection.get(s,r,o,null,i)},this.findAllCollections=function(t,n){var o=App42.URL("storage/findCollections/dbName/"+t);if(null!=t&&(t=t.trim()),""==t||null==t)return void App42Fault.throwExceptionIfNullOrBlank(t,"dbName");var s=e.populateSignParams(),r=e.populateMetaHeaderParams(),a=__merge(s,r);s.dbName=t,App42Connection.get(o,s,n,null,a)},this.findAllDocumentsCount=function(t,n,o){var s=App42.URL("storage/findAll/count/dbName/"+t+"/collectionName/"+n);if(null!=t&&null!=n&&(t=t.trim(),n=n.trim()),""==t||null==t||""==n||null==n)return App42Fault.throwExceptionIfNullOrBlank(t,"dbName"),void App42Fault.throwExceptionIfNullOrBlank(n,"collectionName");var r=e.populateSignParams(),a=e.populateMetaHeaderParams(),i=__merge(r,a);r.dbName=t,r.collectionName=n,App42Connection.get(s,r,o,null,i)},this.findAllDocumentsByPaging=function(t,n,o,s,r){if(null!=t&&null!=n&&null!=o&&null!=s&&(t=t.trim(),n=n.trim()),""==t||""==n||null==t||null==n)return App42Fault.throwExceptionIfNullOrBlank(t,"dbName"),void App42Fault.throwExceptionIfNullOrBlank(n,"collectionName");var a=App42.URL("storage/findAll/dbName/"+t+"/collectionName/"+n+"/"+o+"/"+s),i=e.populateSignParams(),p=e.populateMetaHeaderParams(),l=__merge(i,p);i.dbName=t,i.collectionName=n,i.max=o,i.offset=s,App42Connection.get(a,i,r,null,l)},this.findDocumentById=function(t,n,o,s){var r=App42.URL("storage/findDocById/dbName/"+t+"/collectionName/"+n+"/docId/"+o);if(null!=t&&null!=n&&null!=o&&(t=t.trim(),n=n.trim(),o=o.trim()),""==t||""==n||""==o||null==t||null==n||null==o)return App42Fault.throwExceptionIfNullOrBlank(t,"dbName"),App42Fault.throwExceptionIfNullOrBlank(n,"collectionName"),void App42Fault.throwExceptionIfNullOrBlank(o,"docId");var a=e.populateSignParams(),i=e.populateMetaHeaderParams(),p=__merge(a,i);a.dbName=t,a.collectionName=n,a.docId=o,App42Connection.get(r,a,s,null,p)},this.findDocumentsByQuery=function(t,n,o,s){var r=App42.URL("storage/findDocsByQuery/dbName/"+t+"/collectionName/"+n);if(null!=t&&null!=n&&null!=o&&(n=n.trim()),""==t||""==n||""==o||null==t||null==n||null==o)return App42Fault.throwExceptionIfNullOrBlank(t,"dbName"),App42Fault.throwExceptionIfNullOrBlank(n,"collectionName"),void App42Fault.throwExceptionIfNullOrBlank(o,"query");var a=e.populateSignParams(),i=e.populateMetaHeaderParams(),p=__merge(a,i);a.jsonQuery=getStr(o),a.dbName=t,a.collectionName=n,App42Connection.get(r,a,s,null,p)},this.findDocumentsByQueryWithPaging=function(t,n,o,s,r,a){var i=App42.URL("storage/findDocsByQuery/dbName/"+t+"/collectionName/"+n+"/"+s+"/"+r);if(null!=t&&null!=n&&null!=o&&(t=t.trim(),n=n.trim()),""==t||""==n||""==o||null==t||null==n||null==o)return App42Fault.throwExceptionIfNullOrBlank(t,"dbName"),App42Fault.throwExceptionIfNullOrBlank(n,"collectionName"),void App42Fault.throwExceptionIfNullOrBlank(o,"query");var p=e.populateSignParams(),l=e.populateMetaHeaderParams(),u=__merge(p,l);p.jsonQuery=getStr(o),p.dbName=t,p.collectionName=n,p.max=s,p.offset=r,App42Connection.get(i,p,a,null,u)},this.findDocsWithQueryPagingOrderBy=function(t,n,o,s,r,a,i,p){var l=App42.URL("storage/findDocsByQuery/dbName/"+t+"/collectionName/"+n+"/"+s+"/"+r);if(null!=t&&null!=n&&null!=o&&(t=t.trim(),n=n.trim()),""==t||""==n||""==o||null==t||null==n||null==o)return App42Fault.throwExceptionIfNullOrBlank(t,"dbName"),App42Fault.throwExceptionIfNullOrBlank(n,"collectionName"),void App42Fault.throwExceptionIfNullOrBlank(o,"query");var u={},c=e.populateSignParams(),d=e.populateMetaHeaderParams(),h=__merge(c,d);c.jsonQuery=getStr(o),null!=a&&(u.orderByKey=a),null!=i&&(u.orderByType=i),c.dbName=t,c.collectionName=n,c.max=s,c.offset=r,App42Connection.get(l,c,p,u,h)},this.findDocumentByKeyValue=function(t,n,o,s,r){var a=App42.URL("storage/findDocByKV/dbName/"+t+"/collectionName/"+n+"/"+o+"/"+s);if(null!=t&&null!=n&&null!=o&&null!=s&&(t=t.trim(),n=n.trim(),o=o.trim(),s=s.trim()),""==t||""==n||""==o||""==s||null==t||null==n||null==o||null==s)return App42Fault.throwExceptionIfNullOrBlank(t,"dbName"),App42Fault.throwExceptionIfNullOrBlank(n,"collectionName"),App42Fault.throwExceptionIfNullOrBlank(o,"key"),void App42Fault.throwExceptionIfNullOrBlank(s,"value");var i=e.populateSignParams(),p=e.populateMetaHeaderParams(),l=__merge(i,p);i.dbName=t,i.collectionName=n,i.key=o,i.value=s,App42Connection.get(a,i,r,null,l)},this.updateDocumentByKeyValue=function(t,n,o,s,r,a){var i=App42.URL("storage/update/dbName/"+t+"/collectionName/"+n+"/"+o+"/"+s);if(null!=t&&null!=n&&null!=o&&null!=s&&null!=r&&(t=t.trim(),n=n.trim(),o=o.trim(),s=s.trim()),""==t||""==n||""==o||""==s||""==r||null==t||null==n||null==o||null==s||null==r)return App42Fault.throwExceptionIfNullOrBlank(t,"dbName"),App42Fault.throwExceptionIfNullOrBlank(n,"collectionName"),App42Fault.throwExceptionIfNullOrBlank(o,"key"),App42Fault.throwExceptionIfNullOrBlank(s,"value"),void App42Fault.throwExceptionIfNullOrBlank(r,"newJsonDoc");var p=e.populateSignParams(),l=e.populateMetaHeaderParams(),u=__merge(p,l);p.dbName=t,p.collectionName=n,p.key=o,p.value=s,r instanceof Object&&(r=JSON.stringify(r));var c='{"app42":{"storage":{"jsonDoc":'+r+"}}}}";p.body=c,App42Connection.put(i,p,c,a,u)},this.updateDocumentByDocId=function(t,n,o,s,r){var a=App42.URL("storage/updateByDocId/dbName/"+t+"/collectionName/"+n+"/docId/"+o);if(null!=t&&null!=n&&null!=o&&null!=s&&(t=t.trim(),n=n.trim(),o=o.trim()),""==t||""==n||""==o||""==s||null==t||null==n||null==o||null==s)return App42Fault.throwExceptionIfNullOrBlank(t,"dbName"),App42Fault.throwExceptionIfNullOrBlank(n,"collectionName"),App42Fault.throwExceptionIfNullOrBlank(o,"docId"),void App42Fault.throwExceptionIfNullOrBlank(s,"newJsonDoc");var i=e.populateSignParams(),p=e.populateMetaHeaderParams(),l=__merge(i,p);i.dbName=t,i.collectionName=n,i.docId=o,s instanceof Object&&(s=JSON.stringify(s));var u='{"app42":{"storage":{"jsonDoc":'+s+"}}}}";i.body=u,App42Connection.put(a,i,u,r,l)},this.deleteDocumentById=function(t,n,o,s){var r=App42.URL("storage/deleteDocById/dbName/"+t+"/collectionName/"+n+"/docId/"+o);if(null!=t&&null!=n&&null!=o&&(t=t.trim(),n=n.trim(),o=o.trim()),""==t||""==n||null==o||""==o||null==t||null==n)return App42Fault.throwExceptionIfNullOrBlank(t,"dbName"),App42Fault.throwExceptionIfNullOrBlank(n,"collectionName"),void App42Fault.throwExceptionIfNullOrBlank(o,"docId");var a=e.populateSignParams(),i=e.populateMetaHeaderParams(),p=__merge(a,i);a.dbName=t,a.collectionName=n,a.docId=o,App42Connection.del(r,a,s,p)},this.grantAccessOnDoc=function(t,n,o,s,r){var a=App42.URL("storage/grantAccessOnDoc/"+t+"/"+n+"/"+o);if(null!=t&&null!=n&&null!=o&&(t=t.trim(),n=n.trim(),o=o.trim()),""==t||""==n||null==o||""==o||null==t||null==n)return App42Fault.throwExceptionIfNullOrBlank(t,"dbName"),App42Fault.throwExceptionIfNullOrBlank(n,"collectionName"),void App42Fault.throwExceptionIfNullOrBlank(o,"docId");var i=e.populateSignParams(),p=e.populateMetaHeaderParams(),l=__merge(i,p);i.dbName=t,i.collectionName=n,i.docId=o;var u=new Array;if(s instanceof Array)for(var c=0;c<s.length;c++){var d,h=s[c].user;checkPermissionType(d),d=s[c].permission;var v={user:h,permission:d};u.push(v)}else{var f,y=s.user;checkPermissionType(f),f=s.permission;var m={user:y,permission:f};u.push(m)}var g=JSON.stringify(u),R='{"acl":'+g+"}",C=JSON.stringify(R),b='{"app42":{"storage":{"acls":'+C+"}}}";i.body=b,App42Connection.put(a,i,b,r,l)},this.revokeAccessOnDoc=function(t,n,o,s,r){var a=App42.URL("storage/revokeAccessOnDoc/"+t+"/"+n+"/"+o);if(null!=t&&null!=n&&null!=o&&(t=t.trim(),n=n.trim(),o=o.trim()),""==t||""==n||null==o||""==o||null==t||null==n)return App42Fault.throwExceptionIfNullOrBlank(t,"dbName"),App42Fault.throwExceptionIfNullOrBlank(n,"collectionName"),void App42Fault.throwExceptionIfNullOrBlank(o,"docId");var i=e.populateSignParams(),p=e.populateMetaHeaderParams(),l=__merge(i,p);i.dbName=t,i.collectionName=n,i.docId=o;var u=new Array;if(s instanceof Array)for(var c=0;c<s.length;c++){var d,h=s[c].user;checkPermissionType(d),d=s[c].permission;var v={user:h,permission:d};u.push(v)}else{var f,y=s.user;checkPermissionType(f),f=s.permission;var m={user:y,permission:f};u.push(m)}var g=JSON.stringify(u),R='{"acl":'+g+"}",C=JSON.stringify(R),b='{"app42":{"storage":{"acls":'+C+"}}}}";i.body=b,App42Connection.put(a,i,b,r,l)},this.deleteDocumentsByKeyValue=function(t,n,o,s,r){var a=App42.URL("storage/deletebykey/dbName/"+t+"/collectionName/"+n+"/"+o),i='{"key":"'+s+'"}';if(null!=t&&null!=n&&null!=o&&null!=s&&(t=t.trim(),n=n.trim(),o=o.trim(),s=s.trim()),""==t||""==n||null==t||null==n)return App42Fault.throwExceptionIfNullOrBlank(t,"dbName"),void App42Fault.throwExceptionIfNullOrBlank(n,"collectionName");var p=e.populateSignParams(),l=e.populateMetaHeaderParams(),u=__merge(p,l);p.value=i,p.dbName=t,p.collectionName=n,p.key=o,App42Connection.del(a,p,r,u)},this.deleteAllDocuments=function(t,n,o){var s=App42.URL("storage/deleteAll/dbName/"+t+"/collectionName/"+n);if(null!=t&&null!=n&&(t=t.trim(),n=n.trim()),""==t||""==n||null==t||null==n)return App42Fault.throwExceptionIfNullOrBlank(t,"dbName"),void App42Fault.throwExceptionIfNullOrBlank(n,"collectionName");var r=e.populateSignParams(),a=e.populateMetaHeaderParams(),i=__merge(r,a);r.dbName=t,r.collectionName=n,App42Connection.del(s,r,o,i)},this.findDocumentsByLocation=function(t,n,o,s){var r=App42.URL("storage/findDocsBylocation/dbName/"+t+"/collectionName/"+n);if(null!=t&&null!=n&&null!=o&&(n=n.trim()),""==t||""==n||""==o||null==t||null==n||null==o)return App42Fault.throwExceptionIfNullOrBlank(t,"dbName"),App42Fault.throwExceptionIfNullOrBlank(n,"collectionName"),void App42Fault.throwExceptionIfNullOrBlank(o,"query");var a=e.populateSignParams(),i=e.populateMetaHeaderParams(),p=__merge(a,i);a.jsonQuery=getStr(o),a.dbName=t,a.collectionName=n,App42Connection.get(r,a,s,null,p)},this.saveOrUpdateDocumentByKeyValue=function(t,n,o,s,r,a){var i=App42.URL("storage/saveorupdate/dbName/"+t+"/collectionName/"+n+"/"+o+"/"+s);if(null!=t&&null!=n&&null!=o&&null!=s&&null!=r&&(t=t.trim(),n=n.trim(),o=o.trim(),s=s.trim()),""==t||""==n||""==o||""==s||""==r||null==t||null==n||null==o||null==s||null==r)return App42Fault.throwExceptionIfNullOrBlank(t,"dbName"),App42Fault.throwExceptionIfNullOrBlank(n,"collectionName"),App42Fault.throwExceptionIfNullOrBlank(o,"key"),App42Fault.throwExceptionIfNullOrBlank(s,"value"),void App42Fault.throwExceptionIfNullOrBlank(r,"newJsonDoc");var p=e.populateSignParams(),l=e.populateMetaHeaderParams(),u=__merge(p,l);p.dbName=t,p.collectionName=n,p.key=o,p.value=s,r instanceof Object&&(r=JSON.stringify(r));var c='{"app42":{"storage":{"jsonDoc":'+r+"}}}}";p.body=c,App42Connection.put(i,p,c,a,u)},this.updateDocumentByQuery=function(t,n,o,s,r){var a=App42.URL("storage/updateDocsByQuery/dbName/"+t+"/collectionName/"+n);if(null!=t&&null!=n&&null!=s&&(t=t.trim(),n=n.trim()),""==t||""==n||""==s||null==t||null==n||null==s||null==o||""==o)return App42Fault.throwExceptionIfNullOrBlank(t,"dbName"),App42Fault.throwExceptionIfNullOrBlank(n,"collectionName"),App42Fault.throwExceptionIfNullOrBlank(o,"query"),void App42Fault.throwExceptionIfNullOrBlank(s,"newJsonDoc");var i=e.populateSignParams(),p=e.populateMetaHeaderParams(),l=__merge(i,p);i.dbName=t,i.collectionName=n,s instanceof Object&&(s=JSON.stringify(s));var u=new Object;u.jsonQuery=o,u.jsonDoc=s;var c=JSON.stringify(u),d='{"app42":{"storage":'+c+"}}";i.body=d,App42Connection.put(a,i,d,r,l)},this.addOrUpdateKeys=function(t,n,o,s,r){var a=App42.URL("storage/updateKeysByDocId/dbName/"+t+"/collectionName/"+n+"/docId/"+o);if(null!=t&&null!=n&&null!=s&&(t=t.trim(),n=n.trim()),""==t||""==n||""==s||null==t||null==n||null==s||null==o||""==o)return App42Fault.throwExceptionIfNullOrBlank(t,"dbName"),App42Fault.throwExceptionIfNullOrBlank(n,"collectionName"),App42Fault.throwExceptionIfNullOrBlank(o,"docId"),void App42Fault.throwExceptionIfNullOrBlank(s,"keys");var i=e.populateSignParams(),p=e.populateMetaHeaderParams(),l=__merge(i,p);i.dbName=t,i.docId=o,i.collectionName=n,s instanceof Object&&(s=JSON.stringify(s));var u=new Object;u.jsonDoc=s;var c=JSON.stringify(u),d='{"app42":{"storage":'+c+"}}";i.body=d,App42Connection.put(a,i,d,r,l)},this.addAttachmentToDocs=function(t,n,o,s,r){var a=App42.URL("storage/updatewithattachment/dbName/"+t+"/collectionName/"+n),i=e.populateSignParams(),p=e.populateMetaHeaderParams(),l=__merge(i,p);i.dbName=t,i.collectionName=n,s.docId=o,App42Connection.addAttachmentParams(s),App42Connection.multipart(a,i,s.filePath,r,l)},this.insertJSONDocumentWithFile=function(t,n,o,s,r){var a=App42.URL("storage/insertwithattachment/dbName/"+t+"/collectionName/"+n),i=e.populateSignParams(),p=e.populateMetaHeaderParams(),l=__merge(i,p);i.dbName=t,i.collectionName=n,s.json=o,App42Connection.addAttachmentParams(s),App42Connection.multipart(a,i,s.filePath,r,l)}}function checkOperatorType(e){return myObject.EQUALS==e?"$eq":myObject.NOT_EQUALS==e?"$ne":myObject.GREATER_THAN==e?"$gt":myObject.LESS_THAN==e?"$lt":myObject.GREATER_THAN_EQUALTO==e?"$gte":myObject.LESS_THAN_EQUALTO==e?"$lte":myObject.LIKE==e?"$lk":myObject.AND==e?"$and":myObject.OR==e?"$or":null}function checkGeoOperatorType(e){return GeoOperator.NEAR==e?"$near":GeoOperator.WITHIN==e?"$within":null}function getStr(e){if(e instanceof Array){var t=JSON.stringify(e);return t}e=[e];var t=JSON.stringify(e);return t}function QueryBuilder(){this.build=function(e,t,n){if(null!=e&&null!=t&&null!=t&&(e=e.trim(),n=n.trim()),""==e||""==n||null==e||null==t||null==n)return App42Fault.throwExceptionIfNullOrBlank(e,"key"),App42Fault.throwExceptionIfNullOrBlank(t,"value"),void App42Fault.throwExceptionIfNullOrBlank(n,"operator");if(t instanceof Array&&(t=JSON.stringify(t)),t instanceof Date){var o=new Date(t);t=o,console.log(t)}var s=[],r={key:e,operator:n,value:t};return s.push(r),r},this.setLoggedInUser=function(e){if(null!=e&&(e=e.trim()),""==e||null==e)return void App42Fault.throwExceptionIfNullOrBlank(e,"logged");var t=[],n={key:"_$owner.owner",operator:Operator.EQUALS,value:e};return t.push(n),t},this.setCreatedOn=function(e,t){
var n=[],o={key:"_$createdAt",operator:t,value:e};return n.push(o),n},this.setUpdatedOn=function(e,t){var n=[],o={key:"_$updatedAt",operator:t,value:e};return n.push(o),n},this.setDocumentId=function(e){var t=[],n={key:"_id",operator:Operator.EQUALS,value:e};return t.push(n),t},this.buildGeoQuery=function(e,t,n){checkGeoOperatorType(t);var o=[],s={lat:e.getLat(),lng:e.getLng(),operator:t,maxDistance:n};return o.push(s),o},this.compoundOperator=function(e,t,n){for(var o=[],s={compoundOpt:t},r=0;r<e.length;r++);o.push(e),o.push(s),o.push(n);for(var a=0;a<n.length;a++);return console.log(o),o}}var AppWarp;!function(e){var t=function(){function e(e,t){"undefined"==typeof t&&(t=""),this.json={},""!=t&&(this.json=JSON.parse(t)),this.res=e}return e.prototype.getResult=function(){return this.res},e.prototype.getRoomIds=function(){var e=this.json.ids,t=[];return e&&(t=e.split(";"),t.length>0&&t.pop()),t},e}();e.AllRoomsEvent=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e,t){"undefined"==typeof t&&(t=""),this.json={},""!=t&&(this.json=JSON.parse(t)),this.res=e}return e.prototype.getResult=function(){return this.res},e.prototype.getUsernames=function(){var e=this.json.names,t=[];return e&&(t=e.split(";"),t.length>0&&t.pop()),t},e}();e.AllUsersEvent=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e){"undefined"==typeof e&&(e=""),this.json={},""!=e&&(this.json=JSON.parse(e))}return e.prototype.getChat=function(){return this.json.chat},e.prototype.getSender=function(){return this.json.sender},e.prototype.getLocId=function(){return this.json.id},e.prototype.getIsLocationLobby=function(){return this.json.isLobby?!0:!1},e}();e.Chat=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){!function(e){e[e.Auth=1]="Auth",e[e.JoinLobby=2]="JoinLobby",e[e.SubscribeLobby=3]="SubscribeLobby",e[e.UnsubscribeLobby=4]="UnsubscribeLobby",e[e.LeaveLobby=5]="LeaveLobby",e[e.CreateRoom=6]="CreateRoom",e[e.JoinRoom=7]="JoinRoom",e[e.SubscribeRoom=8]="SubscribeRoom",e[e.UnsubscribeRoom=9]="UnsubscribeRoom",e[e.LeaveRoom=10]="LeaveRoom",e[e.DeleteRoom=11]="DeleteRoom",e[e.Chat=12]="Chat",e[e.UpdatePeers=13]="UpdatePeers",e[e.Signout=14]="Signout",e[e.CreateZone=15]="CreateZone",e[e.DeleteZone=16]="DeleteZone",e[e.GetRooms=17]="GetRooms",e[e.GetUsers=18]="GetUsers",e[e.GetUserInfo=19]="GetUserInfo",e[e.GetRoomInfo=20]="GetRoomInfo",e[e.SetCustomRoomData=21]="SetCustomRoomData",e[e.SetCustomUserData=22]="SetCustomUserData",e[e.GetLobbyInfo=23]="GetLobbyInfo",e[e.JoinRoomWithNUser=24]="JoinRoomWithNUser",e[e.UpdateRoomProperty=25]="UpdateRoomProperty",e[e.JoinRoomWithProperties=27]="JoinRoomWithProperties",e[e.GetRoomWithNUser=28]="GetRoomWithNUser",e[e.GetRoomWithProperties=29]="GetRoomWithProperties",e[e.JoinRoomInRange=37]="JoinRoomInRange",e[e.GetRoomInRange=38]="GetRoomInRange",e[e.LockProperties=35]="LockProperties",e[e.UnlockProperties=36]="UnlockProperties",e[e.KeepAlive=63]="KeepAlive",e[e.AssocPort=64]="AssocPort",e[e.AssocPortAck=65]="AssocPortAck",e[e.PrivateChat=30]="PrivateChat",e[e.Move=31]="Move",e[e.PrivateUpdate=32]="PrivateUpdate",e[e.StartGame=66]="StartGame",e[e.StopGame=67]="StopGame",e[e.GetMoveHistory=68]="GetMoveHistory",e[e.SetNextTurn=69]="SetNextTurn",e[e.GetAllRoomsCount=70]="GetAllRoomsCount",e[e.GetOnlineUsersCount=71]="GetOnlineUsersCount",e[e.BroadcastChat=72]="BroadcastChat",e[e.GetRoomInRangeWithProp=73]="GetRoomInRangeWithProp",e[e.GetUserStatus=74]="GetUserStatus",e[e.JoinAndSubscribeRoom=75]="JoinAndSubscribeRoom",e[e.LeaveAndUnsubscribeRoom=76]="LeaveAndUnsubscribeRoom"}(e.RequestType||(e.RequestType={}));e.RequestType;!function(e){e[e.ChatHistory=1]="ChatHistory"}(e.App42RequestType||(e.App42RequestType={}));e.App42RequestType;!function(e){e[e.FlatString=0]="FlatString",e[e.Binary=1]="Binary",e[e.Json=2]="Json"}(e.PayloadType||(e.PayloadType={}));e.PayloadType;!function(e){e[e.Request=0]="Request",e[e.Response=1]="Response",e[e.Update=2]="Update"}(e.MessageType||(e.MessageType={}));e.MessageType;!function(e){e[e.Success=0]="Success",e[e.AuthError=1]="AuthError",e[e.ResourceNotFound=2]="ResourceNotFound",e[e.ResourceMoved=3]="ResourceMoved",e[e.BadRequest=4]="BadRequest",e[e.ConnectionError=5]="ConnectionError",e[e.UnknownError=6]="UnknownError",e[e.ResultSizeError=7]="ResultSizeError",e[e.SuccessRecovered=8]="SuccessRecovered",e[e.ConnectionErrorRecoverable=9]="ConnectionErrorRecoverable",e[e.UserPausedError=10]="UserPausedError",e[e.AutoRecovering=11]="AutoRecovering"}(e.ResultCode||(e.ResultCode={}));e.ResultCode;!function(e){e[e.WaitingForPausedUser=21]="WaitingForPausedUser",e[e.InvalidAPIKey=22]="InvalidAPIKey"}(e.ReasonCode||(e.ReasonCode={}));e.ReasonCode;!function(e){e[e.RoomCreated=1]="RoomCreated",e[e.RoomDeleted=2]="RoomDeleted",e[e.UserJoinedLobby=3]="UserJoinedLobby",e[e.UserLeftLobby=4]="UserLeftLobby",e[e.UserJoinedRoom=5]="UserJoinedRoom",e[e.UserLeftRoom=6]="UserLeftRoom",e[e.UserOnline=7]="UserOnline",e[e.UserOffline=8]="UserOffline",e[e.Chat=9]="Chat",e[e.UpdatePeers=10]="UpdatePeers",e[e.RoomPropertyChange=11]="RoomPropertyChange",e[e.PrivateChat=12]="PrivateChat",e[e.MoveCompleted=13]="MoveCompleted",e[e.UserPaused=14]="UserPaused",e[e.UserResumed=15]="UserResumed",e[e.GameStarted=16]="GameStarted",e[e.GameStopped=17]="GameStopped",e[e.PrivateUpdate=18]="PrivateUpdate",e[e.NextTurnRequested=19]="NextTurnRequested"}(e.UpdateType||(e.UpdateType={}));e.UpdateType;!function(e){e[e.MaxPropertySizeBytes=2048]="MaxPropertySizeBytes"}(e.Constants||(e.Constants={}));e.Constants;!function(e){e[e.Connected=0]="Connected",e[e.Connecting=1]="Connecting",e[e.Disconnected=2]="Disconnected",e[e.Disconnecting=3]="Disconnecting",e[e.Recovering=4]="Recovering"}(e.ConnectionState||(e.ConnectionState={}));e.ConnectionState}(AppWarp||(AppWarp={}));var AppWarp;!function(e){!function(e){e[e.onConnectDone=0]="onConnectDone",e[e.onDisconnectDone=1]="onDisconnectDone",e[e.onJoinLobbyDone=2]="onJoinLobbyDone",e[e.onLeaveLobbyDone=3]="onLeaveLobbyDone",e[e.onSubscribeLobbyDone=4]="onSubscribeLobbyDone",e[e.onUnsubscribeLobbyDone=5]="onUnsubscribeLobbyDone",e[e.onGetLiveLobbyInfoDone=6]="onGetLiveLobbyInfoDone",e[e.onSubscribeRoomDone=7]="onSubscribeRoomDone",e[e.onUnsubscribeRoomDone=8]="onUnsubscribeRoomDone",e[e.onJoinRoomDone=9]="onJoinRoomDone",e[e.onLeaveRoomDone=10]="onLeaveRoomDone",e[e.onGetLiveRoomInfoDone=11]="onGetLiveRoomInfoDone",e[e.onSetCustomRoomDataDone=12]="onSetCustomRoomDataDone",e[e.onUpdatePropertyDone=13]="onUpdatePropertyDone",e[e.onLockPropertiesDone=14]="onLockPropertiesDone",e[e.onUnlockPropertiesDone=15]="onUnlockPropertiesDone",e[e.onCreateRoomDone=16]="onCreateRoomDone",e[e.onDeleteRoomDone=17]="onDeleteRoomDone",e[e.onGetAllRoomsDone=18]="onGetAllRoomsDone",e[e.onGetOnlineUsersDone=19]="onGetOnlineUsersDone",e[e.onGetLiveUserInfoDone=20]="onGetLiveUserInfoDone",e[e.onSetCustomUserDataDone=21]="onSetCustomUserDataDone",e[e.onGetMatchedRoomsDone=22]="onGetMatchedRoomsDone",e[e.onGetAllRoomsCountDone=23]="onGetAllRoomsCountDone",e[e.onGetOnlineUsersCountDone=24]="onGetOnlineUsersCountDone",e[e.onRoomCreated=25]="onRoomCreated",e[e.onRoomDestroyed=26]="onRoomDestroyed",e[e.onUserLeftRoom=27]="onUserLeftRoom",e[e.onUserJoinedRoom=28]="onUserJoinedRoom",e[e.onUserLeftLobby=29]="onUserLeftLobby",e[e.onUserJoinedLobby=30]="onUserJoinedLobby",e[e.onChatReceived=31]="onChatReceived",e[e.onUpdatePeersReceived=32]="onUpdatePeersReceived",e[e.onUserChangeRoomProperty=33]="onUserChangeRoomProperty",e[e.onPrivateChatReceived=34]="onPrivateChatReceived",e[e.onPrivateUpdateReceived=35]="onPrivateUpdateReceived",e[e.onMoveCompleted=36]="onMoveCompleted",e[e.onGameStarted=37]="onGameStarted",e[e.onGameStopped=38]="onGameStopped",e[e.onUserPaused=39]="onUserPaused",e[e.onUserResumed=40]="onUserResumed",e[e.onSendChatDone=41]="onSendChatDone",e[e.onSendPrivateChatDone=42]="onSendPrivateChatDone",e[e.onSendUpdateDone=43]="onSendUpdateDone",e[e.onSendPrivateUpdateDone=44]="onSendPrivateUpdateDone",e[e.onSendMoveDone=45]="onSendMoveDone",e[e.onStartGameDone=46]="onStartGameDone",e[e.onStopGameDone=47]="onStopGameDone",e[e.onGetMoveHistoryDone=48]="onGetMoveHistoryDone",e[e.onSetNextTurnDone=49]="onSetNextTurnDone",e[e.onNextTurnRequested=50]="onNextTurnRequested",e[e.onUserStatusDone=51]="onUserStatusDone",e[e.onJoinAndSubscribeRoomDone=52]="onJoinAndSubscribeRoomDone",e[e.onLeaveAndUnsubscribeRoomDone=53]="onLeaveAndUnsubscribeRoomDone",e[e.onGetChatHistoryDone=1001]="onGetChatHistoryDone"}(e.Events||(e.Events={}));e.Events}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function t(e,t){"undefined"==typeof t&&(t=""),this.json={},""!=t&&(this.json=JSON.parse(t)),this.res=e}return t.prototype.getResult=function(){return this.res},t.prototype.getRoom=function(){return new e.Room(this.res,JSON.stringify(this.json))},t.prototype.getCustomData=function(){return this.json.data},t.prototype.getProperties=function(){return this.json.properties},t.prototype.getUsers=function(){var e=this.json.usernames,t=[];return e&&(t=e.split(";"),t.length>0&&t.pop()),t},t}();e.LiveRoom=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e,t){"undefined"==typeof t&&(t=""),this.json={},""!=t&&(this.json=JSON.parse(t)),this.res=e}return e.prototype.getResult=function(){return this.res},e.prototype.getName=function(){return this.json.name},e.prototype.getLocationId=function(){return this.json.locationId},e.prototype.getCustomData=function(){return this.json.custom},e.prototype.isLobby=function(){return this.json.isLobby?this.json.isLobby:!1},e.prototype.isPaused=function(){return this.json.isPaused?this.json.isPaused:!1},e}();e.LiveUser=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e,t){"undefined"==typeof t&&(t=""),this.json={},""!=t&&(this.json=JSON.parse(t)),this.res=e}return e.prototype.getResult=function(){return this.res},e.prototype.getLobbyId=function(){return this.json.id},e.prototype.getOwner=function(){return this.json.owner},e.prototype.getName=function(){return this.json.name},e.prototype.getIsPrimary=function(){return this.json.isPrimary},e.prototype.getMaxUsers=function(){return this.json.maxUsers},e}();e.Lobby=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e,t){"undefined"==typeof t&&(t=""),this.json={},""!=t&&(this.json=JSON.parse(t)),this.res=e}return e.prototype.getResult=function(){return this.res},e.prototype.getRooms=function(){var e=[],t=0;for(var n in this.json){var o={};o.id=n,o.name=this.json[n].name,o.owner=this.json[n].owner,o.maxUsers=this.json[n].maxUsers,o.isAdmin=this.json[n].isAdmin,e[t]=o,t++}return e},e}();e.MatchedRoomEvent=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e){this.json={},""!=e&&(this.json=JSON.parse(e))}return e.prototype.getSender=function(){return this.json.sender},e.prototype.getNextTurn=function(){return this.json.nextTurn},e.prototype.getMoveData=function(){return this.json.moveData},e.prototype.getRoomId=function(){this.json.roomId},e}();e.Move=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function t(t,n){this.messageType=t[n+0],this.updateType=t[n+1],this.reserved=t[n+2],this.payLoadType=t[n+3],this.payLoadSize=e.Utility.bytesToIntger(t,n+4),this.payLoad=new Uint8Array(this.payLoadSize);for(var o=0;o<this.payLoadSize;o++)this.payLoad[o]=t[8+n+o]}return t.prototype.getMessageType=function(){return this.messageType},t.prototype.getUpdateType=function(){return this.updateType},t.prototype.getPayloadType=function(){return this.payLoadType},t.prototype.getPayloadSize=function(){return this.payLoadSize},t.prototype.getPayload=function(){return this.payLoad},t.prototype.getPayloadString=function(){return e.Utility.bin2String(this.payLoad)},t.prototype.debug=function(){console.log("=========Notify========="),console.log("messageType : "+e.MessageType[this.getMessageType()]),console.log("updateType  : "+e.UpdateType[this.getUpdateType()]),console.log("payLoadType : "+e.PayloadType[this.getPayloadType()]),console.log("payLoadSize : "+this.getPayloadSize()),console.log("payLoad     : "+this.getPayloadString())},t}();e.Notify=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function t(){}return t.buildWarpRequest=function(t,n,o,s){var r=new Uint8Array(16+o.length);r[0]=e.MessageType.Request,r[1]=n,r[2]=t>>>24,r[3]=t>>>16,r[4]=t>>>8,r[5]=t;for(var a=6;9>=a;a++)r[a]=0;r[10]=0,r[11]=e.PayloadType.Binary,o.length>0&&n!=e.RequestType.UpdatePeers&&n!=e.RequestType.PrivateUpdate&&(r[11]=e.PayloadType.Json);var i=o.length;if(r[12]=i>>>24,r[13]=i>>>16,r[14]=i>>>8,r[15]=i,0==s)for(var a=0;i>a;++a)r[16+a]=o[a];else for(var a=0;i>a;++a)r[16+a]=o.charCodeAt(a);return r},t.buildAuthRequest=function(t,n,o,s){var r=e.Utility.getODataUTCDateFilter(),a="";a+="apiKey"+n,a+="timeStamp"+r,a+="user"+s,a+="versionJS_2.1";var i=e.CryptoJS.HmacSHA1(a,o).toString(),p=encodeURIComponent(e.Utility.base64_encode(e.Utility.hex2bin(i))),l={};return l.apiKey=n,l.version="JS_2.1",l.timeStamp=r,l.user=s,l.signature=p,l.keepalive=6,l.recoverytime=t,l.dbName=e.WarpClient.dbName,JSON.stringify(l)},t.buildLobbyRequest=function(){var e={};return e.isPrimary=!0,JSON.stringify(e)},t.buildChatRequest=function(e){if(e.length>=512)return"";var t={};return t.chat=e,JSON.stringify(t)},t.buildChatHistoryRequest=function(e,t,n){if(e.length>=512)return"";var o={};return o.chat=e,o.sender=t,o.chatTime=(new Date).getTime(),o.roomId=n,JSON.stringify(o)},t.buildPrivateChatRequest=function(e,t){if(t.length>=512)return"";var n={};return n.to=e,n.chat=t,JSON.stringify(n)},t.buildPrivateUpdateRequest=function(e,t){var n=new Uint8Array(e.length+t.length+1),o=e.length;n[0]=o;for(var s=0;o>s;++s)n[1+s]=e.charCodeAt(s);for(var r=0;r<t.length;++r)n[1+o+r]=t[r];return n},t.buildRoomRequest=function(e){var t={};return t.id=e,JSON.stringify(t)},t.buildUserRequest=function(e){var t={};return t.name=e,JSON.stringify(t)},t.buildRoomInRangeRequest=function(e,t,n){var o={};return o.minUsers=e,o.maxUsers=t,o.maxPreferred=n,JSON.stringify(o)},t.buildRoomWithPropertiesRequest=function(e){var t={};return t.properties=e,JSON.stringify(t)},t.buildRoomInRangeWithPropRequest=function(e,t,n,o){var s={};return s.minUsers=e,s.maxUsers=t,s.maxPreferred=n,s.properties=o,JSON.stringify(s)},t.buildSetCustomRoomDataRequest=function(e,t){var n={};return n.id=e,n.data=t,JSON.stringify(n)},t.buildSetCustomUserDataRequest=function(e,t){var n={};return n.name=e,n.data=t,JSON.stringify(n)},t.buildUpdateRoomPropertiesRequest=function(e,t,n){"undefined"==typeof n&&(n=null);var o="";if(null!=n&&n.length>0)for(var s=0;s<n.length;++s)o+=s<n.length-1?n[s]+";":n[s];var r={};return r.id=e,r.addOrUpdate=t,r.remove=o,JSON.stringify(r)},t.buildLockPropertiesRequest=function(e){var t={};return t.lockProperties=e,JSON.stringify(t)},t.buildUnlockPropertiesRequest=function(e){var t="";if(e&&e.length>0)for(var n=0;n<e.length;++n)t+=n<e.length-1?e[n]+";":e[n];var o={};return o.unlockProperties=t,JSON.stringify(o)},t.buildCreateTurnRoomRequest=function(e,t,n,o,s){"undefined"==typeof o&&(o=null),"undefined"==typeof s&&(s=-1);var r={};return r.name=e,r.owner=t,r.maxUsers=n,r.chatHistory=WarpClient.isChatHistory,null!=o&&(r.properties=o),s>=0&&(r.turnTime=s,r.inox=!0),JSON.stringify(r)},t.buildStartGameRequest=function(e,t){var n={};return n.isDefaultLogic=e,n.nextTurn=t,JSON.stringify(n)},t.buildSetNextTurnRequest=function(e){var t={};return t.nextTurn=e,JSON.stringify(t)},t.buildSendMoveRequest=function(e,t){var n={};return n.moveData=e,n.nextTurn=t,JSON.stringify(n)},t.buildGetMoveHistoryRequest=function(){var e={};return e.count=5,JSON.stringify(e)},t.buildBroadcastChatRequest=function(e,t){var n={};return n.id=e,n.chat=t,JSON.stringify(n)},t}();e.RequestBuilder=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function t(t,n){this.messageType=t[n+0],this.requestType=t[n+1],this.resultCode=t[n+2],this.reserved=t[n+3],this.payLoadType=t[n+4],this.payLoadSize=e.Utility.bytesToIntger(t,n+5),this.payLoad=new Uint8Array(this.payLoadSize);for(var o=0;o<this.payLoadSize;o++)this.payLoad[o]=t[9+n+o]}return t.prototype.getMessageType=function(){return this.messageType},t.prototype.getRequestType=function(){return this.requestType},t.prototype.getResultCode=function(){return this.resultCode},t.prototype.getPayloadType=function(){return this.payLoadType},t.prototype.getPayloadSize=function(){return this.payLoadSize},t.prototype.getPayload=function(){return this.payLoad},t.prototype.getPayloadString=function(){return e.Utility.bin2String(this.payLoad)},t.prototype.debug=function(){console.log("========Response========"),console.log("messageType : "+e.MessageType[this.getMessageType()]),console.log("requestType : "+e.RequestType[this.getRequestType()]),console.log("resultCode  : "+e.ResultCode[this.getResultCode()]),console.log("payLoadType : "+e.PayloadType[this.getPayloadType()]),console.log("payLoadSize : "+this.getPayloadSize()),console.log("payLoad     : "+this.getPayloadString())},t}();e.Response=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e,t){"undefined"==typeof t&&(t=""),this.json={},""!=t&&(this.json=JSON.parse(t)),this.res=e}return e.prototype.getResult=function(){return this.res},e.prototype.getRoomId=function(){return this.json.id},e.prototype.getOwner=function(){return this.json.owner},e.prototype.getName=function(){return this.json.name},e.prototype.getMaxUsers=function(){return this.json.maxUsers},e}();e.Room=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(){}return e.getODataUTCDateFilter=function(){var e,t=new Date,n=(t.getUTCMonth()+1).toString();e=1==n.length?"0"+n:n;var o,s=t.getUTCDate().toString();o=1==s.length?"0"+s:s;var r="";return r+=t.getUTCFullYear()+"-",r+=e+"-",r+=o,r+="T"+t.getUTCHours()+":",r+=t.getUTCMinutes()+":",r+=t.getUTCSeconds()+".",r+=t.getUTCMilliseconds(),r+="Z"},e.hex2bin=function(e){for(var t=[],n=0;n<e.length-1;n+=2)t.push(parseInt(e.substr(n,2),16));return String.fromCharCode.apply(String,t)},e.base64_encode=function(e){var t,n,o,s,r,a,i,p,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=0,c=0,d="",h=[];if(!e)return e;do t=e.charCodeAt(u++),n=e.charCodeAt(u++),o=e.charCodeAt(u++),p=t<<16|n<<8|o,s=p>>18&63,r=p>>12&63,a=p>>6&63,i=63&p,h[c++]=l.charAt(s)+l.charAt(r)+l.charAt(a)+l.charAt(i);while(u<e.length);d=h.join("");var v=e.length%3;return(v?d.slice(0,v-3):d)+"===".slice(v||3)},e.bin2String=function(e){for(var t="",n=0;n<e.length;n++){var o=e[n];t+=String.fromCharCode(o)}return t},e.bytesToIntger=function(e,t){for(var n=0,o=0;4>o;o++)n=(n<<8)+(255&e[t+o]);return n},e}();e.Utility=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function t(){if(this.LOOKUP_ADDRESS="control.appwarp.shephertz.com/lookup",this.LOOKUP_ADDRESS_DNS="control.appwarp.shephertz.com/lookup_dns",this.responseCallbacks=[],this.updateCallbacks=[],this.SessionID=0,this.lastSendTime=0,this.userName="",this.keepAliveInterval=2e3,this.pendingKeepAliveIntervalsLimit=3,this.countPendingKeepAlives=0,this.connectionState=e.ConnectionState.Disconnected,this.enableLogs=!1,this.useSSL=!1,this.autoRecover=!1,this.dbName="",this.isChatHistory=!1,this.storageService=null,t.instance)throw new Error("Error: Instantiation failed: Use WarpClient.getInstance() instead of new.");t.instance=this,setInterval(function(){if(this.AppWarp.WarpClient.instance.connectionState==e.ConnectionState.Connected){var t=(new Date).getTime(),n=t-this.AppWarp.WarpClient.instance.lastSendTime;if(n>this.AppWarp.WarpClient.instance.keepAliveInterval)if(this.AppWarp.WarpClient.instance.countPendingKeepAlives>=this.AppWarp.WarpClient.instance.pendingKeepAliveIntervalsLimit)this.AppWarp.WarpClient.instance.connectionState=e.ConnectionState.Disconnected,this.AppWarp.WarpClient.recoveryAllowance>0&&0!=this.AppWarp.WarpClient.instance.SessionID?1==this.AppWarp.WarpClient.instance.autoRecover?(this.AppWarp.WarpClient.instance.responseCallbacks[this.AppWarp.Events.onConnectDone]&&this.AppWarp.WarpClient.instance.responseCallbacks[this.AppWarp.Events.onConnectDone](this.AppWarp.ResultCode.AutoRecovering,0),this.AppWarp.WarpClient.instance.recoverConnection()):this.AppWarp.WarpClient.instance.responseCallbacks[this.AppWarp.Events.onConnectDone]&&this.AppWarp.WarpClient.instance.responseCallbacks[this.AppWarp.Events.onConnectDone](this.AppWarp.ResultCode.ConnectionErrorRecoverable,0):(this.AppWarp.WarpClient.instance.SessionID=0,this.AppWarp.WarpClient.instance.responseCallbacks[this.AppWarp.Events.onConnectDone]&&this.AppWarp.WarpClient.instance.responseCallbacks[this.AppWarp.Events.onConnectDone](this.AppWarp.ResultCode.ConnectionError,0)),this.AppWarp.WarpClient.instance.socket.onopen=function(){},this.AppWarp.WarpClient.instance.socket.onclose=function(){},this.AppWarp.WarpClient.instance.socket.onmessage=function(){},delete this.AppWarp.WarpClient.instance.socket;else{var o=this.AppWarp.RequestBuilder.buildWarpRequest(this.AppWarp.WarpClient.instance.SessionID,e.RequestType.KeepAlive,"",!0);this.AppWarp.WarpClient.instance.sendMessage(o.buffer),this.AppWarp.WarpClient.instance.countPendingKeepAlives++}}},500)}return t.initialize=function(e,n,o){"undefined"==typeof o&&(o=""),t.apiKey=e,t.secretKey=n,t.serverAddress=o},t.terminate=function(){null!=t.instance&&(t.instance.getConnectionState()!=e.ConnectionState.Disconnected&&t.instance.disconnect(),delete t.instance)},t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.sendMessage=function(e){this.socket.send(e),this.lastSendTime=(new Date).getTime()},t.prototype.onMessage=function(t){for(var n=new Uint8Array(t.data),o=n.length,s=0;o>s;)if(n[s]==e.MessageType.Response){var r=new e.Response(n,s);s+=this.handleResponse(r)}else if(n[s]==e.MessageType.Update){var a=new e.Notify(n,s);s+=this.handleNotify(a)}},t.prototype.handleResponse=function(n){if(1==this.enableLogs&&n.getRequestType()!=e.RequestType.KeepAlive&&n.debug(),n.getRequestType()==e.RequestType.Auth){var o=n.getResultCode(),s=0;if(n.getResultCode()==e.ResultCode.Success){var r=JSON.parse(n.getPayloadString());this.SessionID=r.sessionid,r.hasOwnProperty("autoRecover")&&(this.autoRecover=r.autoRecover),r.hasOwnProperty("recoveryTime")&&(t.recoveryAllowance=r.recoveryTime),this.connectionState==e.ConnectionState.Recovering&&(o=e.ResultCode.SuccessRecovered),this.connectionState=e.ConnectionState.Connected}else{if(n.getPayloadType()==e.PayloadType.Json){var r=JSON.parse(n.getPayloadString());s=r.reasonCode}this.SessionID=0,this.socket.onclose=function(){},this.socket.close(),this.connectionState=e.ConnectionState.Disconnected}this.responseCallbacks[e.Events.onConnectDone]&&this.responseCallbacks[e.Events.onConnectDone](o,s)}else if(n.getRequestType()==e.RequestType.JoinLobby){var a=new e.Lobby(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onJoinLobbyDone]&&this.responseCallbacks[e.Events.onJoinLobbyDone](a)}else if(n.getRequestType()==e.RequestType.SubscribeLobby){var a=new e.Lobby(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onSubscribeLobbyDone]&&this.responseCallbacks[e.Events.onSubscribeLobbyDone](a)}else if(n.getRequestType()==e.RequestType.UnsubscribeLobby){var a=new e.Lobby(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onUnsubscribeLobbyDone]&&this.responseCallbacks[e.Events.onUnsubscribeLobbyDone](a)}else if(n.getRequestType()==e.RequestType.LeaveLobby){var a=new e.Lobby(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onLeaveLobbyDone]&&this.responseCallbacks[e.Events.onLeaveLobbyDone](a)}else if(n.getRequestType()==e.RequestType.Chat)this.responseCallbacks[e.Events.onSendChatDone]&&this.responseCallbacks[e.Events.onSendChatDone](n.getResultCode());else if(n.getRequestType()==e.RequestType.JoinRoom||n.getRequestType()==e.RequestType.JoinRoomInRange||n.getRequestType()==e.RequestType.JoinRoomWithProperties){var i=new e.Room(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onJoinRoomDone]&&this.responseCallbacks[e.Events.onJoinRoomDone](i)}else if(n.getRequestType()==e.RequestType.SubscribeRoom){var i=new e.Room(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onSubscribeRoomDone]&&this.responseCallbacks[e.Events.onSubscribeRoomDone](i)}else if(n.getRequestType()==e.RequestType.UnsubscribeRoom){var i=new e.Room(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onUnsubscribeRoomDone]&&this.responseCallbacks[e.Events.onUnsubscribeRoomDone](i)}else if(n.getRequestType()==e.RequestType.JoinAndSubscribeRoom){var i=new e.Room(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onJoinAndSubscribeRoomDone]&&this.responseCallbacks[e.Events.onJoinAndSubscribeRoomDone](i)}else if(n.getRequestType()==e.RequestType.LeaveAndUnsubscribeRoom){var i=new e.Room(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onLeaveAndUnsubscribeRoomDone]&&this.responseCallbacks[e.Events.onLeaveAndUnsubscribeRoomDone](i)}else if(n.getRequestType()==e.RequestType.LeaveRoom){var i=new e.Room(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onLeaveRoomDone]&&this.responseCallbacks[e.Events.onLeaveRoomDone](i)}else if(n.getRequestType()==e.RequestType.CreateRoom){var i=new e.Room(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onCreateRoomDone]&&this.responseCallbacks[e.Events.onCreateRoomDone](i)}else if(n.getRequestType()==e.RequestType.DeleteRoom){var i=new e.Room(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onDeleteRoomDone]&&this.responseCallbacks[e.Events.onDeleteRoomDone](i)}else if(n.getRequestType()==e.RequestType.GetRoomInfo){var p=new e.LiveRoom(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onGetLiveRoomInfoDone]&&this.responseCallbacks[e.Events.onGetLiveRoomInfoDone](p)}else if(n.getRequestType()==e.RequestType.GetLobbyInfo){var p=new e.LiveRoom(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onGetLiveLobbyInfoDone]&&this.responseCallbacks[e.Events.onGetLiveLobbyInfoDone](p)}else if(n.getRequestType()==e.RequestType.GetUserInfo){var l=new e.LiveUser(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onGetLiveUserInfoDone]&&this.responseCallbacks[e.Events.onGetLiveUserInfoDone](l)}else if(n.getRequestType()==e.RequestType.GetUserStatus){var l=new e.LiveUser(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onUserStatusDone]&&this.responseCallbacks[e.Events.onUserStatusDone](l)}else if(n.getRequestType()==e.RequestType.SetCustomUserData){var l=new e.LiveUser(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onSetCustomUserDataDone]&&this.responseCallbacks[e.Events.onSetCustomUserDataDone](l)}else if(n.getRequestType()==e.RequestType.SetCustomRoomData){var p=new e.LiveRoom(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onSetCustomRoomDataDone]&&this.responseCallbacks[e.Events.onSetCustomRoomDataDone](p)}else if(n.getRequestType()==e.RequestType.GetUsers){var u=new e.AllUsersEvent(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onGetOnlineUsersDone]&&this.responseCallbacks[e.Events.onGetOnlineUsersDone](u)}else if(n.getRequestType()==e.RequestType.GetRooms){var c=new e.AllRoomsEvent(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onGetAllRoomsDone]&&this.responseCallbacks[e.Events.onGetAllRoomsDone](c)}else if(n.getRequestType()==e.RequestType.GetRoomInRange||n.getRequestType()==e.RequestType.GetRoomWithProperties||n.getRequestType()==e.RequestType.GetRoomInRangeWithProp){var d=new e.MatchedRoomEvent(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onGetMatchedRoomsDone]&&this.responseCallbacks[e.Events.onGetMatchedRoomsDone](d)}else if(n.getRequestType()==e.RequestType.UpdatePeers)this.responseCallbacks[e.Events.onSendUpdateDone]&&this.responseCallbacks[e.Events.onSendUpdateDone](n.getResultCode());else if(n.getRequestType()==e.RequestType.PrivateChat)this.responseCallbacks[e.Events.onSendPrivateChatDone]&&this.responseCallbacks[e.Events.onSendPrivateChatDone](n.getResultCode());else if(n.getRequestType()==e.RequestType.UpdateRoomProperty){var p=new e.LiveRoom(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onUpdatePropertyDone]&&this.responseCallbacks[e.Events.onUpdatePropertyDone](p)}else if(n.getRequestType()==e.RequestType.LockProperties)this.responseCallbacks[e.Events.onLockPropertiesDone]&&this.responseCallbacks[e.Events.onLockPropertiesDone](n.getResultCode());else if(n.getRequestType()==e.RequestType.UnlockProperties)this.responseCallbacks[e.Events.onUnlockPropertiesDone]&&this.responseCallbacks[e.Events.onUnlockPropertiesDone](n.getResultCode());else if(n.getRequestType()==e.RequestType.Move)this.responseCallbacks[e.Events.onSendMoveDone]&&this.responseCallbacks[e.Events.onSendMoveDone](n.getResultCode());else if(n.getRequestType()==e.RequestType.StartGame)this.responseCallbacks[e.Events.onStartGameDone]&&this.responseCallbacks[e.Events.onStartGameDone](n.getResultCode());else if(n.getRequestType()==e.RequestType.StopGame)this.responseCallbacks[e.Events.onStopGameDone]&&this.responseCallbacks[e.Events.onStopGameDone](n.getResultCode());else if(n.getRequestType()==e.RequestType.GetMoveHistory){if(this.responseCallbacks[e.Events.onGetMoveHistoryDone]){for(var h=JSON.parse(n.getPayloadString()),v=[],f=0;f<h.history.length;++f)v[f]=new e.Move(JSON.stringify(h.history[f]));this.responseCallbacks[e.Events.onGetMoveHistoryDone](n.getResultCode(),v)}}else if(n.getRequestType()==e.RequestType.SetNextTurn)this.responseCallbacks[e.Events.onSetNextTurnDone]&&this.responseCallbacks[e.Events.onSetNextTurnDone](n.getResultCode());else if(n.getRequestType()==e.RequestType.PrivateUpdate)this.responseCallbacks[e.Events.onSendPrivateUpdateDone]&&this.responseCallbacks[e.Events.onSendPrivateUpdateDone](n.getResultCode());else if(n.getRequestType()==e.RequestType.KeepAlive)this.countPendingKeepAlives=0;else if(n.getRequestType()==e.RequestType.GetAllRoomsCount){if(this.responseCallbacks[e.Events.onGetAllRoomsCountDone]){var r=JSON.parse(n.getPayloadString());this.responseCallbacks[e.Events.onGetAllRoomsCountDone](n.getResultCode(),r.count)}}else if(n.getRequestType()==e.RequestType.GetOnlineUsersCount){if(this.responseCallbacks[e.Events.onGetOnlineUsersCountDone]){var r=JSON.parse(n.getPayloadString());this.responseCallbacks[e.Events.onGetOnlineUsersCountDone](n.getResultCode(),r.count)}}else n.getRequestType()==e.RequestType.BroadcastChat&&this.responseCallbacks[e.Events.onSendChatDone]&&this.responseCallbacks[e.Events.onSendChatDone](n.getResultCode());return 9+n.getPayloadSize()},t.prototype.handleApp42Response=function(n,o){if(n==e.App42RequestType.ChatHistory&&t.instance.responseCallbacks[e.Events.onGetChatHistoryDone]){for(var s=JSON.parse(o),o=s.app42.response.storage.jsonDoc,r=[],a=0;a<o.length;++a)r[a]=o[a];t.instance.responseCallbacks[e.Events.onGetChatHistoryDone](e.ResultCode.Success,r)}},t.prototype.handleNotify=function(t){if(1==this.enableLogs&&t.debug(),t.getUpdateType()==e.UpdateType.Chat){var n=new e.Chat(t.getPayloadString());this.updateCallbacks[e.Events.onChatReceived]&&this.updateCallbacks[e.Events.onChatReceived](n)}else if(t.getUpdateType()==e.UpdateType.RoomCreated){var o=new e.Room(0,t.getPayloadString());this.updateCallbacks[e.Events.onRoomCreated]&&this.updateCallbacks[e.Events.onRoomCreated](o)}else if(t.getUpdateType()==e.UpdateType.RoomDeleted){var o=new e.Room(0,t.getPayloadString());this.updateCallbacks[e.Events.onRoomDestroyed]&&this.updateCallbacks[e.Events.onRoomDestroyed](o)}else if(t.getUpdateType()==e.UpdateType.UpdatePeers)this.updateCallbacks[e.Events.onUpdatePeersReceived]&&this.updateCallbacks[e.Events.onUpdatePeersReceived](t.getPayload());else if(t.getUpdateType()==e.UpdateType.UserJoinedLobby){
var s=new e.Lobby(0,t.getPayloadString()),r=JSON.parse(t.getPayloadString()).user;this.updateCallbacks[e.Events.onUserJoinedLobby]&&this.updateCallbacks[e.Events.onUserJoinedLobby](s,r)}else if(t.getUpdateType()==e.UpdateType.UserLeftLobby){var s=new e.Lobby(0,t.getPayloadString()),r=JSON.parse(t.getPayloadString()).user;this.updateCallbacks[e.Events.onUserLeftLobby]&&this.updateCallbacks[e.Events.onUserLeftLobby](s,r)}else if(t.getUpdateType()==e.UpdateType.UserJoinedRoom){var o=new e.Room(0,t.getPayloadString()),r=JSON.parse(t.getPayloadString()).user;this.updateCallbacks[e.Events.onUserJoinedRoom]&&this.updateCallbacks[e.Events.onUserJoinedRoom](o,r)}else if(t.getUpdateType()==e.UpdateType.UserLeftRoom){var o=new e.Room(0,t.getPayloadString()),r=JSON.parse(t.getPayloadString()).user;this.updateCallbacks[e.Events.onUserLeftRoom]&&this.updateCallbacks[e.Events.onUserLeftRoom](o,r)}else if(t.getUpdateType()==e.UpdateType.PrivateChat){var a=JSON.parse(t.getPayloadString());this.updateCallbacks[e.Events.onPrivateChatReceived]&&this.updateCallbacks[e.Events.onPrivateChatReceived](a.sender,a.chat)}else if(t.getUpdateType()==e.UpdateType.RoomPropertyChange){var a=JSON.parse(t.getPayloadString());this.updateCallbacks[e.Events.onUserChangeRoomProperty]&&this.updateCallbacks[e.Events.onUserChangeRoomProperty](a.sender,a.properties,a.lockProperties)}else if(t.getUpdateType()==e.UpdateType.MoveCompleted){var i=new e.Move(t.getPayloadString());this.updateCallbacks[e.Events.onMoveCompleted]&&this.updateCallbacks[e.Events.onMoveCompleted](i)}else if(t.getUpdateType()==e.UpdateType.GameStarted){if(this.updateCallbacks[e.Events.onGameStarted]){var a=JSON.parse(t.getPayloadString());this.updateCallbacks[e.Events.onGameStarted](a.sender,a.id,a.nextTurn)}}else if(t.getUpdateType()==e.UpdateType.GameStopped){if(this.updateCallbacks[e.Events.onGameStopped]){var a=JSON.parse(t.getPayloadString());this.updateCallbacks[e.Events.onGameStopped](a.sender,a.id)}}else if(t.getUpdateType()==e.UpdateType.UserResumed){if(this.updateCallbacks[e.Events.onUserResumed]){var a=JSON.parse(t.getPayloadString());this.updateCallbacks[e.Events.onUserResumed](a.id,a.isLobby,a.user)}}else if(t.getUpdateType()==e.UpdateType.UserPaused){if(this.updateCallbacks[e.Events.onUserPaused]){var a=JSON.parse(t.getPayloadString());this.updateCallbacks[e.Events.onUserPaused](a.id,a.isLobby,a.user)}}else if(t.getUpdateType()==e.UpdateType.NextTurnRequested){if(this.updateCallbacks[e.Events.onNextTurnRequested]){var a=JSON.parse(t.getPayloadString());this.updateCallbacks[e.Events.onNextTurnRequested](a.lastTurn)}}else if(t.getUpdateType()==e.UpdateType.PrivateUpdate&&this.updateCallbacks[e.Events.onPrivateUpdateReceived]){for(var p=t.getPayloadSize(),l=t.getPayload(),u=l[0],c=new Uint8Array(u),d=p-u-1,h=new Uint8Array(d),v=0;u>v;++v)c[v]=l[1+v];for(var f=0;d>f;++f)h[f]=l[1+u+f];this.updateCallbacks[e.Events.onPrivateUpdateReceived](e.Utility.bin2String(c),h)}return 8+t.getPayloadSize()},t.prototype.joinZone=function(n){var o=e.RequestBuilder.buildAuthRequest(t.recoveryAllowance,t.apiKey,t.secretKey,n),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.Auth,o,!0);this.sendMessage(s.buffer)},t.prototype.setResponseListener=function(e,t){this.responseCallbacks[e]=t},t.prototype.setApp42ResponseListener=function(e,t){this.responseCallbacks[e]=t},t.prototype.resetApp42ResponseListener=function(e,t){this.responseCallbacks[e]=t},t.prototype.resetResponseListener=function(e){this.responseCallbacks[e]&&delete this.responseCallbacks[e]},t.prototype.setNotifyListener=function(e,t){this.updateCallbacks[e]=t},t.prototype.resetNotifyListener=function(e){this.updateCallbacks[e]&&delete this.updateCallbacks[e]},t.prototype._connect=function(n){this.countPendingKeepAlives=0,1==this.useSSL?this.socket=new WebSocket("wss://"+t.serverAddress+":12347"):this.socket=new WebSocket("ws://"+t.serverAddress+":12346"),this.socket.binaryType="arraybuffer";var o=this;this.socket.onopen=function(){n?o.joinZone(n):(this.connectionState=e.ConnectionState.Disconnected,o.responseCallbacks[e.Events.onConnectDone]&&o.responseCallbacks[e.Events.onConnectDone](e.ResultCode.BadRequest,0))},this.socket.onclose=function(){o.connectionState==e.ConnectionState.Connected?(o.connectionState=e.ConnectionState.Disconnected,t.recoveryAllowance>0&&0!=o.SessionID?1==o.autoRecover?(o.responseCallbacks[e.Events.onConnectDone]&&o.responseCallbacks[e.Events.onConnectDone](e.ResultCode.AutoRecovering,0),o.recoverConnection()):o.responseCallbacks[e.Events.onConnectDone]&&o.responseCallbacks[e.Events.onConnectDone](e.ResultCode.ConnectionErrorRecoverable,0):(o.SessionID=0,o.responseCallbacks[e.Events.onConnectDone]&&o.responseCallbacks[e.Events.onConnectDone](e.ResultCode.ConnectionError,0))):o.connectionState==e.ConnectionState.Recovering?1==o.autoRecover?(o.connectionState=e.ConnectionState.Disconnected,o.responseCallbacks[e.Events.onConnectDone]&&o.responseCallbacks[e.Events.onConnectDone](e.ResultCode.AutoRecovering,0),o.recoverConnection()):o.responseCallbacks[e.Events.onConnectDone]&&o.responseCallbacks[e.Events.onConnectDone](e.ResultCode.ConnectionErrorRecoverable,0):o.connectionState==e.ConnectionState.Connecting&&(o.connectionState=e.ConnectionState.Disconnected,o.responseCallbacks[e.Events.onConnectDone]&&o.responseCallbacks[e.Events.onConnectDone](e.ResultCode.ConnectionError,0))},this.socket.onmessage=function(e){o.onMessage(e)}},t.prototype.setGeoLocation=function(e){t.geoLocation=e,t.serverAddress=""},t.prototype.connect=function(n){if(this.connectionState!=e.ConnectionState.Disconnected)this.responseCallbacks[e.Events.onConnectDone]&&this.responseCallbacks[e.Events.onConnectDone](e.ResultCode.BadRequest,0);else if(this.userName=n,this.connectionState=e.ConnectionState.Connecting,""==t.serverAddress){var o=new XMLHttpRequest,s=this;o.onreadystatechange=function(){if(4==o.readyState&&200==o.status){var r=JSON.parse(o.responseText);r.address?(t.serverAddress=r.address,s._connect(n)):(this.connectionState=e.ConnectionState.Disconnected,s.responseCallbacks[e.Events.onConnectDone]&&s.responseCallbacks[e.Events.onConnectDone](e.ResultCode.AuthError,e.ReasonCode.InvalidAPIKey))}else 4==o.readyState&&404==o.status?(this.connectionState=e.ConnectionState.Disconnected,s.responseCallbacks[e.Events.onConnectDone]&&s.responseCallbacks[e.Events.onConnectDone](e.ResultCode.AuthError,e.ReasonCode.InvalidAPIKey)):4==o.readyState&&0==o.status&&(this.connectionState=e.ConnectionState.Disconnected,s.responseCallbacks[e.Events.onConnectDone]&&s.responseCallbacks[e.Events.onConnectDone](e.ResultCode.ConnectionError,0))},""!=t.geoLocation?o.open("GET",this.getControlLookup()+"?api="+t.apiKey+"&geo="+t.geoLocation,!0):o.open("GET",this.getControlLookup()+"?api="+t.apiKey,!0),o.send()}else this._connect(n)},t.prototype.disconnect=function(){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onDisconnectDone]&&this.responseCallbacks[e.Events.onDisconnectDone](e.ResultCode.BadRequest));var t=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.Signout,"",!0);this.sendMessage(t.buffer),this.SessionID=0,this.connectionState=e.ConnectionState.Disconnecting;var n=this;this.socket.onclose=function(){n.connectionState=e.ConnectionState.Disconnected,n.responseCallbacks[e.Events.onDisconnectDone]&&n.responseCallbacks[e.Events.onDisconnectDone](e.ResultCode.Success)},this.socket.close()},t.prototype.joinLobby=function(){if(this.connectionState!=e.ConnectionState.Connected){var t=new e.Lobby(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onJoinLobbyDone]&&this.responseCallbacks[e.Events.onJoinLobbyDone](t))}var n=e.RequestBuilder.buildLobbyRequest(),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.JoinLobby,n,!0);this.sendMessage(o.buffer)},t.prototype.subscribeLobby=function(){if(this.connectionState!=e.ConnectionState.Connected){var t=new e.Lobby(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onSubscribeLobbyDone]&&this.responseCallbacks[e.Events.onSubscribeLobbyDone](t))}var n=e.RequestBuilder.buildLobbyRequest(),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.SubscribeLobby,n,!0);this.sendMessage(o.buffer)},t.prototype.unsubscribeLobby=function(){if(this.connectionState!=e.ConnectionState.Connected){var t=new e.Lobby(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onUnsubscribeLobbyDone]&&this.responseCallbacks[e.Events.onUnsubscribeLobbyDone](t))}var n=e.RequestBuilder.buildLobbyRequest(),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.UnsubscribeLobby,n,!0);this.sendMessage(o.buffer)},t.prototype.joinAndSubscribeRoom=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onJoinAndSubscribeRoomDone]&&this.responseCallbacks[e.Events.onJoinAndSubscribeRoomDone](n))}var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.JoinAndSubscribeRoom,o,!0);this.sendMessage(s.buffer)},t.prototype.leaveAndUnsubscribeRoom=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onLeaveAndUnsubscribeRoomDone]&&this.responseCallbacks[e.Events.onLeaveAndUnsubscribeRoomDone](n))}var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.LeaveAndUnsubscribeRoom,o,!0);this.sendMessage(s.buffer)},t.prototype.leaveLobby=function(){if(this.connectionState!=e.ConnectionState.Connected){var t=new e.Lobby(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onLeaveLobbyDone]&&this.responseCallbacks[e.Events.onLeaveLobbyDone](t))}var n=e.RequestBuilder.buildLobbyRequest(),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.LeaveLobby,n,!0);this.sendMessage(o.buffer)},t.prototype.joinRoom=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onJoinRoomDone]&&this.responseCallbacks[e.Events.onJoinRoomDone](n))}var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.JoinRoom,o,!0);this.sendMessage(s.buffer)},t.prototype.joinRoomInRange=function(t,n,o){if(this.connectionState!=e.ConnectionState.Connected){var s=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onJoinRoomDone]&&this.responseCallbacks[e.Events.onJoinRoomDone](s))}var r=e.RequestBuilder.buildRoomInRangeRequest(t,n,o),a=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.JoinRoomInRange,r,!0);this.sendMessage(a.buffer)},t.prototype.joinRoomWithProperties=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onJoinRoomDone]&&this.responseCallbacks[e.Events.onJoinRoomDone](n))}var o=e.RequestBuilder.buildRoomWithPropertiesRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.JoinRoomWithProperties,o,!0);this.sendMessage(s.buffer)},t.prototype.subscribeRoom=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onSubscribeRoomDone]&&this.responseCallbacks[e.Events.onSubscribeRoomDone](n))}var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.SubscribeRoom,o,!0);this.sendMessage(s.buffer)},t.prototype.unsubscribeRoom=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onUnsubscribeRoomDone]&&this.responseCallbacks[e.Events.onUnsubscribeRoomDone](n))}var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.UnsubscribeRoom,o,!0);this.sendMessage(s.buffer)},t.prototype.leaveRoom=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onLeaveRoomDone]&&this.responseCallbacks[e.Events.onLeaveRoomDone](n))}var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.LeaveRoom,o,!0);this.sendMessage(s.buffer)},t.prototype.createRoom=function(n,o,s,r){if("undefined"==typeof r&&(r=null),this.connectionState!=e.ConnectionState.Connected){var a=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onCreateRoomDone]&&this.responseCallbacks[e.Events.onCreateRoomDone](a))}var i={};if(i.name=n,i.owner=o,i.maxUsers=s,null!=r){if(JSON.stringify(r).length>e.Constants.MaxPropertySizeBytes){if(this.responseCallbacks[e.Events.onCreateRoomDone]){var a=new e.Room(e.ResultCode.ResultSizeError,"");this.responseCallbacks[e.Events.onCreateRoomDone](a)}return}i.properties=r}i.chatHistory=t.isChatHistory;var p=JSON.stringify(i),l=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.CreateRoom,p,!0);this.sendMessage(l.buffer)},t.prototype.deleteRoom=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onDeleteRoomDone]&&this.responseCallbacks[e.Events.onDeleteRoomDone](n))}var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.DeleteRoom,o,!0);this.sendMessage(s.buffer)},t.prototype.getLiveRoomInfo=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.LiveRoom(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onGetLiveRoomInfoDone]&&this.responseCallbacks[e.Events.onGetLiveRoomInfoDone](n))}var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetRoomInfo,o,!0);this.sendMessage(s.buffer)},t.prototype.getLiveLobbyInfo=function(){if(this.connectionState!=e.ConnectionState.Connected){var t=new e.LiveRoom(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onGetLiveLobbyInfoDone]&&this.responseCallbacks[e.Events.onGetLiveLobbyInfoDone](t))}var n=e.RequestBuilder.buildLobbyRequest(),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetLobbyInfo,n,!0);this.sendMessage(o.buffer)},t.prototype.getLiveUserInfo=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.LiveUser(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onGetLiveUserInfoDone]&&this.responseCallbacks[e.Events.onGetLiveUserInfoDone](n))}var o=e.RequestBuilder.buildUserRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetUserInfo,o,!0);this.sendMessage(s.buffer)},t.prototype.getUserStatus=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.LiveUser(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onUserStatusDone]&&this.responseCallbacks[e.Events.onUserStatusDone](n))}var o=e.RequestBuilder.buildUserRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetUserStatus,o,!0);this.sendMessage(s.buffer)},t.prototype.setCustomUserData=function(t,n){if(this.connectionState!=e.ConnectionState.Connected){var o=new e.LiveUser(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onSetCustomUserDataDone]&&this.responseCallbacks[e.Events.onSetCustomUserDataDone](o))}var s=e.RequestBuilder.buildSetCustomUserDataRequest(t,n),r=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.SetCustomUserData,s,!0);this.sendMessage(r.buffer)},t.prototype.setCustomRoomData=function(t,n){if(this.connectionState!=e.ConnectionState.Connected){var o=new e.LiveRoom(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onSetCustomRoomDataDone]&&this.responseCallbacks[e.Events.onSetCustomRoomDataDone](o))}var s=e.RequestBuilder.buildSetCustomRoomDataRequest(t,n),r=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.SetCustomRoomData,s,!0);this.sendMessage(r.buffer)},t.prototype.getOnlineUsers=function(){if(this.connectionState!=e.ConnectionState.Connected){var t=new e.AllUsersEvent(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onGetOnlineUsersDone]&&this.responseCallbacks[e.Events.onGetOnlineUsersDone](t))}var n=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetUsers,"",!0);this.sendMessage(n.buffer)},t.prototype.getAllRooms=function(){if(this.connectionState!=e.ConnectionState.Connected){var t=new e.AllRoomsEvent(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onGetAllRoomsDone]&&this.responseCallbacks[e.Events.onGetAllRoomsDone](t))}var n=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetRooms,"",!0);this.sendMessage(n.buffer)},t.prototype.getRoomsInRange=function(t,n){if(this.connectionState!=e.ConnectionState.Connected){var o=new e.MatchedRoomEvent(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onGetMatchedRoomsDone]&&this.responseCallbacks[e.Events.onGetMatchedRoomsDone](o))}var s=e.RequestBuilder.buildRoomInRangeRequest(t,n,!0),r=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetRoomInRange,s,!0);this.sendMessage(r.buffer)},t.prototype.getRoomsWithProperties=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.MatchedRoomEvent(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onGetMatchedRoomsDone]&&this.responseCallbacks[e.Events.onGetMatchedRoomsDone](n))}var o=e.RequestBuilder.buildRoomWithPropertiesRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetRoomWithProperties,o,!0);this.sendMessage(s.buffer)},t.prototype.getRoomInRangeWithProp=function(t,n,o){if(this.connectionState!=e.ConnectionState.Connected){var s=new e.MatchedRoomEvent(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onGetMatchedRoomsDone]&&this.responseCallbacks[e.Events.onGetMatchedRoomsDone](s))}var r=e.RequestBuilder.buildRoomInRangeWithPropRequest(t,n,!0,o),a=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetRoomInRangeWithProp,r,!0);this.sendMessage(a.buffer)},t.prototype.sendChat=function(t){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onSendChatDone]&&this.responseCallbacks[e.Events.onSendChatDone](e.ResultCode.BadRequest));var n=e.RequestBuilder.buildChatRequest(t);if(""==n)this.responseCallbacks[e.Events.onSendChatDone]&&this.responseCallbacks[e.Events.onSendChatDone](e.ResultCode.BadRequest);else{var o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.Chat,n,!0);this.sendMessage(o.buffer)}},t.prototype.sendUpdatePeers=function(t){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onSendUpdateDone]&&this.responseCallbacks[e.Events.onSendUpdateDone](e.ResultCode.BadRequest));if(t.length>=512)this.responseCallbacks[e.Events.onSendUpdateDone]&&this.responseCallbacks[e.Events.onSendUpdateDone](e.ResultCode.BadRequest);else{var n=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.UpdatePeers,t,!1);this.sendMessage(n.buffer)}},t.prototype.sendPrivateUpdatePeers=function(t,n){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onSendPrivateUpdateDone]&&this.responseCallbacks[e.Events.onSendPrivateUpdateDone](e.ResultCode.BadRequest));if(n.length>=512)this.responseCallbacks[e.Events.onSendPrivateUpdateDone]&&this.responseCallbacks[e.Events.onSendPrivateUpdateDone](e.ResultCode.BadRequest);else{var o=e.RequestBuilder.buildPrivateUpdateRequest(t,n),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.PrivateUpdate,o,!1);this.sendMessage(s.buffer)}},t.prototype.sendPrivateChat=function(t,n){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onSendPrivateChatDone]&&this.responseCallbacks[e.Events.onSendPrivateChatDone](e.ResultCode.BadRequest));var o=e.RequestBuilder.buildPrivateChatRequest(t,n);if(""==o)this.responseCallbacks[e.Events.onSendPrivateChatDone]&&this.responseCallbacks[e.Events.onSendPrivateChatDone](e.ResultCode.BadRequest);else{var s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.PrivateChat,o,!0);this.sendMessage(s.buffer)}},t.prototype.updateRoomProperties=function(t,n,o){if("undefined"==typeof o&&(o=null),this.connectionState!=e.ConnectionState.Connected){var s=new e.LiveRoom(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onUpdatePropertyDone]&&this.responseCallbacks[e.Events.onUpdatePropertyDone](s))}var r=e.RequestBuilder.buildUpdateRoomPropertiesRequest(t,n,o),a=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.UpdateRoomProperty,r,!0);this.sendMessage(a.buffer)},t.prototype.lockProperties=function(t){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onLockPropertiesDone]&&this.responseCallbacks[e.Events.onLockPropertiesDone](e.ResultCode.BadRequest));var n=e.RequestBuilder.buildLockPropertiesRequest(t),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.LockProperties,n,!0);this.sendMessage(o.buffer)},t.prototype.unlockProperties=function(t){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onUnlockPropertiesDone]&&this.responseCallbacks[e.Events.onUnlockPropertiesDone](e.ResultCode.BadRequest));var n=e.RequestBuilder.buildUnlockPropertiesRequest(t),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.UnlockProperties,n,!0);this.sendMessage(o.buffer)},t.prototype.createTurnRoom=function(t,n,o,s,r){if(this.connectionState!=e.ConnectionState.Connected){var a=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onCreateRoomDone]&&this.responseCallbacks[e.Events.onCreateRoomDone](a))}var i=e.RequestBuilder.buildCreateTurnRoomRequest(t,n,o,s,r),p=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.CreateRoom,i,!0);this.sendMessage(p.buffer)},t.prototype.sendMove=function(t,n){if("undefined"==typeof n&&(n=""),this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onSendMoveDone]&&this.responseCallbacks[e.Events.onSendMoveDone](e.ResultCode.BadRequest));var o=e.RequestBuilder.buildSendMoveRequest(t,n),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.Move,o,!0);this.sendMessage(s.buffer)},t.prototype.startGame=function(t,n){if("undefined"==typeof t&&(t=!0),"undefined"==typeof n&&(n=""),this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onStartGameDone]&&this.responseCallbacks[e.Events.onStartGameDone](e.ResultCode.BadRequest));var o=e.RequestBuilder.buildStartGameRequest(t,n),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.StartGame,o,!0);this.sendMessage(s.buffer)},t.prototype.stopGame=function(){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onStopGameDone]&&this.responseCallbacks[e.Events.onStopGameDone](e.ResultCode.BadRequest));var t=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.StopGame,"",!0);this.sendMessage(t.buffer)},t.prototype.getMoveHistory=function(){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onGetMoveHistoryDone]&&this.responseCallbacks[e.Events.onGetMoveHistoryDone](e.ResultCode.BadRequest,[]));var t=e.RequestBuilder.buildGetMoveHistoryRequest(),n=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetMoveHistory,t,!0);this.sendMessage(n.buffer)},t.prototype.setNextTurn=function(t){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onSetNextTurnDone]&&this.responseCallbacks[e.Events.onSetNextTurnDone](e.ResultCode.BadRequest));var n=e.RequestBuilder.buildSetNextTurnRequest(t),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.SetNextTurn,n,!0);this.sendMessage(o.buffer)},t.prototype.setRecoveryAllowance=function(e){t.recoveryAllowance=e},t.prototype.recoverConnection=function(){if(0==this.SessionID||this.connectionState!=e.ConnectionState.Disconnected)this.responseCallbacks[e.Events.onConnectDone]&&this.responseCallbacks[e.Events.onConnectDone](e.ResultCode.BadRequest,0);else if(this.connectionState=e.ConnectionState.Recovering,""==t.serverAddress){var n=new XMLHttpRequest,o=this;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var s=JSON.parse(n.responseText);s.address?(t.serverAddress=s.address,o._connect(o.userName)):(this.connectionState=e.ConnectionState.Disconnected,o.responseCallbacks[e.Events.onConnectDone]&&o.responseCallbacks[e.Events.onConnectDone](e.ResultCode.AuthError,e.ReasonCode.InvalidAPIKey))}else 4==n.readyState&&404==n.status?(this.connectionState=e.ConnectionState.Disconnected,o.responseCallbacks[e.Events.onConnectDone]&&o.responseCallbacks[e.Events.onConnectDone](e.ResultCode.AuthError,e.ReasonCode.InvalidAPIKey)):4==n.readyState&&0==n.status&&(this.connectionState=e.ConnectionState.Disconnected,o.responseCallbacks[e.Events.onConnectDone]&&o.responseCallbacks[e.Events.onConnectDone](e.ResultCode.ConnectionError,0))},""!=t.geoLocation?n.open("GET",this.getControlLookup()+"?api="+t.apiKey+"&geo="+t.geoLocation,!0):n.open("GET",this.getControlLookup()+"?api="+t.apiKey,!0),n.send()}else this._connect(this.userName)},t.prototype.getSessionID=function(){return this.SessionID},t.prototype.recoverConnectionWithSessionID=function(e,t){this.SessionID=e,this.userName=t,this.recoverConnection()},t.prototype.enableTrace=function(e){this.enableLogs=e},t.prototype.getConnectionState=function(){return this.connectionState},t.prototype.enableSSL=function(e){this.useSSL=e},t.prototype.getControlLookup=function(){return 1==this.useSSL?"https://"+this.LOOKUP_ADDRESS_DNS:"http://"+this.LOOKUP_ADDRESS},t.prototype.getOnlineUsersCount=function(){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onGetOnlineUsersCountDone]&&this.responseCallbacks[e.Events.onGetOnlineUsersCountDone](e.ResultCode.BadRequest));var t=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetOnlineUsersCount,"",!0);this.sendMessage(t.buffer)},t.prototype.getAllRoomsCount=function(){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onGetAllRoomsCountDone]&&this.responseCallbacks[e.Events.onGetAllRoomsCountDone](e.ResultCode.BadRequest));var t=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetAllRoomsCount,"",!0);this.sendMessage(t.buffer)},t.prototype.broadcastChat=function(t,n){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onSendChatDone]&&this.responseCallbacks[e.Events.onSendChatDone](e.ResultCode.BadRequest));var o=e.RequestBuilder.buildBroadcastChatRequest(t,n),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.BroadcastChat,o,!0);this.sendMessage(s.buffer)},t.prototype.setDbName=function(e){t.dbName=e},t.prototype.enableChatHistory=function(e){t.isChatHistory=e,e&&(App42.initialize(t.apiKey,t.secretKey),t.storageService=new App42Storage)},t.prototype.sendChat=function(n,o,s){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onSendChatDone]&&this.responseCallbacks[e.Events.onSendChatDone](e.ResultCode.BadRequest));var r=e.RequestBuilder.buildChatHistoryRequest(n,this.userName,s);if(""==r)this.responseCallbacks[e.Events.onSendChatDone]&&this.responseCallbacks[e.Events.onSendChatDone](e.ResultCode.BadRequest);else{var a=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.Chat,r,!0);this.sendMessage(a.buffer),o&&null!=t.storageService&&null!=t.dbName&&""!=t.dbName&&t.storageService.insertJSONDocument(t.dbName,"ChatHistory",r,{success:function(e){},error:function(e){console.log(e)}})}},t.prototype.getChatHistory=function(n,o,s){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onGetChatHistoryDone]&&this.responseCallbacks[e.Events.onGetChatHistoryDone](e.ResultCode.BadRequest));if(null==t.storageService||null==n||""==n)return void(this.responseCallbacks[e.Events.onGetChatHistoryDone]&&this.responseCallbacks[e.Events.onGetChatHistoryDone](e.ResultCode.BadRequest));var r=new QueryBuilder,a=r.build("roomId",n,Operator.EQUALS);t.storageService.findDocumentsByQueryWithPaging(t.dbName,"ChatHistory",a,o,s,{success:function(n){return void 0==n?void(t.instance.responseCallbacks[e.Events.onGetChatHistoryDone]&&t.instance.responseCallbacks[e.Events.onGetChatHistoryDone](e.ResultCode.ResourceNotFound)):void t.prototype.handleApp42Response(e.App42RequestType.ChatHistory,n)},error:function(n){t.instance.responseCallbacks[e.Events.onGetChatHistoryDone]&&t.instance.responseCallbacks[e.Events.onGetChatHistoryDone](e.ResultCode.ResourceNotFound)}})},t.instance=null,t.apiKey="",t.secretKey="",t.serverAddress="",t.recoveryAllowance=0,t.geoLocation="",t}();e.WarpClient=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=t||function(e,t){var n={},o=n.lib={},s=function(){},r=o.Base={extend:function(e){s.prototype=this;var t=new s;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=o.WordArray=r.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||p).stringify(this)},concat:function(e){var t=this.words,n=e.words,o=this.sigBytes;if(e=e.sigBytes,this.clamp(),o%4)for(var s=0;e>s;s++)t[o+s>>>2]|=(n[s>>>2]>>>24-8*(s%4)&255)<<24-8*((o+s)%4);else if(65535<n.length)for(s=0;e>s;s+=4)t[o+s>>>2]=n[s>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],o=0;t>o;o+=4)n.push(4294967296*e.random()|0);return new a.init(n,t)}}),i=n.enc={},p=i.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],o=0;e>o;o++){var s=t[o>>>2]>>>24-8*(o%4)&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],o=0;t>o;o+=2)n[o>>>3]|=parseInt(e.substr(o,2),16)<<24-4*(o%8);return new a.init(n,t/2)}},l=i.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],o=0;e>o;o++)n.push(String.fromCharCode(t[o>>>2]>>>24-8*(o%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],o=0;t>o;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-8*(o%4);return new a.init(n,t)}},u=i.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},c=o.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,o=n.words,s=n.sigBytes,r=this.blockSize,i=s/(4*r),i=t?e.ceil(i):e.max((0|i)-this._minBufferSize,0);if(t=i*r,s=e.min(4*t,s),t){for(var p=0;t>p;p+=r)this._doProcessBlock(o,p);p=o.splice(0,t),n.sigBytes-=s}return new a.init(p,s)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=c.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),
this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}});var d=n.algo={};return n}(Math);!function(){var e=t,n=e.lib,o=n.WordArray,s=n.Hasher,r=[],n=e.algo.SHA1=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],s=n[1],a=n[2],i=n[3],p=n[4],l=0;80>l;l++){if(16>l)r[l]=0|e[t+l];else{var u=r[l-3]^r[l-8]^r[l-14]^r[l-16];r[l]=u<<1|u>>>31}u=(o<<5|o>>>27)+p+r[l],u=20>l?u+((s&a|~s&i)+1518500249):40>l?u+((s^a^i)+1859775393):60>l?u+((s&a|s&i|a&i)-1894007588):u+((s^a^i)-899497514),p=i,i=a,a=s<<30|s>>>2,s=o,o=u}n[0]=n[0]+o|0,n[1]=n[1]+s|0,n[2]=n[2]+a|0,n[3]=n[3]+i|0,n[4]=n[4]+p|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[(o+64>>>9<<4)+14]=Math.floor(n/4294967296),t[(o+64>>>9<<4)+15]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=s._createHelper(n),e.HmacSHA1=s._createHmacHelper(n)}(),function(){var e=t,n=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var o=e.blockSize,s=4*o;t.sigBytes>s&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),a=this._iKey=t.clone(),i=r.words,p=a.words,l=0;o>l;l++)i[l]^=1549556828,p[l]^=909522486;r.sigBytes=a.sigBytes=s,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),e.CryptoJS=t}(AppWarp||(AppWarp={}));var Permission={READ:"R",WRITE:"W"},App42Connection={},App42Fault={},App42={},apiKey,secretKey,customeCodeURL="https://customcode.shephertz.com/",uri="https://api.shephertz.com/cloud/1.0/",eventUri="https://analytics.shephertz.com/cloud/1.0/",name,geoTag,sessionRequest=!1,unlockEventService=!1,sessionInvalidate=!1,loggedInUser=null,dbName=null,addAtatchmentJSONParams=null;(function(){this.initialize=function(e,t){apiKey=e,secretKey=t,void 0==localStorage.getItem("_App42_DeviceId")&&localStorage.setItem("_App42_DeviceId",guid()),loggedInUser=localStorage.getItem("_App42_LoggedInUser"),null==this.getLoggedInUser()&&this.setLoggedInUser(localStorage.getItem("_App42_DeviceId")),__Installation._fireInstallEvent(e,t)},this.enableAppStateEventTracking=function(e){e&&(unlockEventService=!0,App42EventTracker._trackBrowserSession())},this.enableEventService=function(e){e&&(unlockEventService=!0)},this.setDbName=function(e){dbName=e},this.getDbName=function(){return dbName},this.setLoggedInUser=function(e){loggedInUser=e,localStorage.setItem("_App42_LoggedInUser",e),unlockEventService&&__Installation._getCurrentLoggedInUserProperties(apiKey,secretKey)},this.getLoggedInUser=function(){return loggedInUser},this.setBaseUrl=function(e){uri=e},this.setEventBaseUrl=function(e){eventUri=e},this.setCustomeCodeURL=function(e){customeCodeURL=e},this.URL=function(e){var t=uri,n=t+e;return n},this.EventURL=function(e){var t=eventUri,n=t+e;return n},this.CustomCodeURL=function(e){var t=customeCodeURL,n=t+e;return n},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})}).apply(App42),App42Exception.prototype=Error.prototype,function(){function e(){this.name="App42Exception";var e="Set your apiKey and secretKey correctly in App42.initialize( )";this.message=e||""}this.throwExceptionIfNullOrBlank=function(e,t){if(""==e||null==e){var n=new App42Exception(e,t);throw n}},this.appError=function(){var t=new e;throw t},e.prototype=Error.prototype}.apply(App42Fault);var version="1.0",XMLHttpFactories=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];(function(){this.get=function(e,t,n,o,s){if(null==t.apiKey||null==secretKey||""==secretKey||""==t.apiKey)return void App42Fault.appError();var r=new jsSHA(sortAssoc(t),"ASCII"),a=r.getHMAC(secretKey,"ASCII","SHA-1","HEX"),i=Convert(a);t.signature=i;var p="";t.userList?p="&userList="+t.userList:t.userName?p="&userName="+t.userName+"&":t.channelName?p="&channelName="+t.channelName+"&":t.jsonQuery?s.jsonQuery=t.jsonQuery:p="";var l="",u="";null!=o&&(l=o.orderByKey?"&orderByKey="+o.orderByKey:"",u=o.orderByType?"&orderByType="+o.orderByType:""),createCORSRequest("GET",e+"?version="+t.version+p+l+u,t.timeStamp,i,t.apiKey,null,n,t.sessionId,t.adminKey,t.fbAccessToken,geoTag,s)},this.post=function(e,t,n,o,s){if(null==t.apiKey||null==secretKey||""==secretKey||""==t.apiKey)return void App42Fault.appError();var r="";t.jsonQuery&&(r="&jsonQuery="+t.jsonQuery);var a=new jsSHA(sortAssoc(t),"ASCII"),i=a.getHMAC(secretKey,"ASCII","SHA-1","HEX"),p=Convert(i);t.signature=p,createCORSRequest("POST",e+"?version="+t.version+r,t.timeStamp,p,t.apiKey,n,o,t.sessionId,t.adminKey,t.fbAccessToken,geoTag,s)},this.put=function(e,t,n,o,s){if(null==t.apiKey||null==secretKey||""==secretKey||""==t.apiKey)return void App42Fault.appError();var r=new jsSHA(sortAssoc(t),"ASCII"),a=r.getHMAC(secretKey,"ASCII","SHA-1","HEX"),i=Convert(a);t.signature=i,createCORSRequest("PUT",e+"?version="+t.version,t.timeStamp,i,t.apiKey,n,o,t.sessionId,t.adminKey,t.fbAccessToken,geoTag,s)},this.del=function(e,t,n,o){if(null==t.apiKey||null==secretKey||""==secretKey||""==t.apiKey)return void App42Fault.appError();var s=null;t.avatarName&&(s=t.avatarName,delete t.avatarName);var r=new jsSHA(sortAssoc(t),"ASCII"),a=r.getHMAC(secretKey,"ASCII","SHA-1","HEX"),i=Convert(a);if(t.signature=i,t.geoPoints){var p="&geoPoints="+t.geoPoints;e=e+"?version="+t.version+p}else if(t.deviceToken)p="?deviceToken="+t.deviceToken+"&userName="+t.userName+"&",e=e+p+"?version="+t.version;else if(t.value)p="&value="+t.value+"&timeStamp="+o.timeStamp+"&&apiKey="+o.apiKey+"&",e=e+"?version="+t.version+p;else if(t.channelName)p="?channelName="+t.channelName,e+=p;else if(s)p="?avatarName="+s+"&",e+=p;else if(t.messageIds){p="&messageIds="+t.messageIds;e=e+"?version="+t.version+"&timeStamp="+t.timeStamp+p+"&apiKey="+t.apiKey+"&"}else t.groupName&&t.tagName?e+="?":t.groupName&&t.userName?e+="?":t.role&&t.userName?e+="?":t.userName?(p="?userName="+t.userName,e+=p):(p="",e=e+"?version="+t.version+p);createCORSRequest("DELETE",e,t.timeStamp,i,t.apiKey,null,n,t.sessionId,t.adminKey,t.fbAccessToken,geoTag,o)},this.addAttachmentParams=function(e){var t={};null!=e.docId||null!=e.json?(void 0==e.type?t.type="OTHER":t.type=e.type,void 0==e.name?t.name="Default":t.name=e.name,null!=e.docId?t.docId=e.docId:t.json=e.json,addAtatchmentJSONParams=t):addAtatchmentJSONParams=t},this.multipart=function(e,t,n,o,s){if(null==t.apiKey||null==secretKey||""==secretKey||""==t.apiKey)return void App42Fault.appError();var r=new jsSHA(sortAssoc(t),"ASCII"),a=r.getHMAC(secretKey,"ASCII","SHA-1","HEX"),i=Convert(a);t.signature=i,t=__merge(t,addAtatchmentJSONParams),t.albumName?multipartCORSRequestForPhoto("POST",e+"?version="+t.version,t.timeStamp,i,t.apiKey,t,n,o,t.sessionId,t.adminKey,t.fbAccessToken,geoTag,s):multipartCORSRequest("POST",e+"?version="+t.version,t.timeStamp,i,t.apiKey,t,n,o,t.sessionId,t.adminKey,t.fbAccessToken,geoTag,s)},this.executeCustomCode=function(e,t,n,o,s){if(null==s.apiKey||null==secretKey||""==secretKey||""==s.apiKey)return void App42Fault.appError();var r=new jsSHA(sortAssoc(t),"ASCII"),a=r.getHMAC(secretKey,"ASCII","SHA-1","HEX"),i=Convert(a);createCORSRequest("POST",e+"?",t.timeStamp,i,t.apiKey,n,o,t.sessionId,t.adminKey,t.fbAccessToken,geoTag,s)}}).apply(App42Connection);var App42EventHandler={},_Keys={_app42_lastUserUpdatedOn_:"_app42_lastUserUpdatedOn_",_app42_defaultDeviceInfo:"_app42_defaultDeviceInfo",_app42_oldUserProps_:"_app42_oldUserProps_",_app42_isAppInstalled:"_app42_isAppInstalled",_app42_lastCommAt_:"_app42_lastCommAt_",_app42_lastCommAt_super:"_app42_lastCommAt_super",_app42_lastCommAt_start_:"_app42_lastCommAt_start_",_app42_lastCommAt_end_:"_app42_lastCommAt_end_"},counter=0;(function(){this.generateSuperProperties=function(){var e={},t="-",n="";screen.width&&(width=screen.width?screen.width:"",height=screen.height?screen.height:"",n+=""+width+" x "+height);var o,s,r,a=navigator.appVersion,i=navigator.userAgent,p=navigator.appName,l=""+parseFloat(navigator.appVersion),u=parseInt(navigator.appVersion,10);-1!=(s=i.indexOf("Opera"))?(p="Opera",l=i.substring(s+6),-1!=(s=i.indexOf("Version"))&&(l=i.substring(s+8))):-1!=(s=i.indexOf("MSIE"))?(p="Microsoft Internet Explorer",l=i.substring(s+5)):-1!=(s=i.indexOf("Chrome"))?(p="Chrome",l=i.substring(s+7)):-1!=(s=i.indexOf("Safari"))?(p="Safari",l=i.substring(s+7),-1!=(s=i.indexOf("Version"))&&(l=i.substring(s+8))):-1!=(s=i.indexOf("Firefox"))?(p="Firefox",l=i.substring(s+8)):-1!=i.indexOf("Trident/")?(p="Microsoft Internet Explorer",l=i.substring(i.indexOf("rv:")+3)):(o=i.lastIndexOf(" ")+1)<(s=i.lastIndexOf("/"))&&(p=i.substring(o,s),l=i.substring(s+1),p.toLowerCase()==p.toUpperCase()&&(p=navigator.appName)),-1!=(r=l.indexOf(";"))&&(l=l.substring(0,r)),-1!=(r=l.indexOf(" "))&&(l=l.substring(0,r)),-1!=(r=l.indexOf(")"))&&(l=l.substring(0,r)),u=parseInt(""+l,10),isNaN(u)&&(l=""+parseFloat(navigator.appVersion),u=parseInt(navigator.appVersion,10));var c=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(a),d=navigator.cookieEnabled?!0:!1;"undefined"!=typeof navigator.cookieEnabled||d||(document.cookie="testcookie",d=-1!=document.cookie.indexOf("testcookie")?!0:!1);var h=t,v=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var f in v){var y=v[f];if(y.r.test(i)){h=y.s;break}}var m=t;switch(/Windows/.test(h)&&(m=/Windows (.*)/.exec(h)[1],h="Windows"),h){case"Mac OS X":m=/Mac OS X (10[\.\_\d]+)/.exec(i)[1];break;case"Android":m=/Android ([\.\_\d]+)/.exec(i)[1];break;case"iOS":m=/OS (\d+)_(\d+)_?(\d+)?/.exec(a),m=m[1]+"."+m[2]+"."+(0|m[3])}var g="no check";if("undefined"!=typeof swfobject){var R=swfobject.getFlashPlayerVersion();g=R.major>0?R.major+"."+R.minor+" r"+R.release:t}var C=document.referrer,b=document.referrer.split("/")[2];return""==C&&(C="Self",b="Self"),e.app42_browser_version=l,e.app42_browser=p,e.app42_brand=p,e.app42_screen_width=screen.width,e.app42_screen_height=screen.height,e.app42_screen_dpi=96,e.app42_screen_colourDepth=screen.colorDepth,e.app42_screen_pixelDepth=screen.pixelDepth,e.app42_css_pixel=window.devicePixelRatio,e.app42_os=h,e.app42_os_version=m,e.app42_cookieEnabled=d,e.app42_flashVersion=g,e.app42_referrer=C,e.app42_referring_domain=b,e.app42_mobile=c,e.app42_lastCommunicatedAt="",e.app42_counter=1,e},this.getDefaultDeviceProps=function(){var e={};if(""!=__Local._checkKey(_Keys._app42_defaultDeviceInfo)){var t={};t.app42_counter=incrementCounter(),t.app42_lastCommunicatedAt=__Local._checkKey(_Keys._app42_lastCommAt_super),this.updateDeviceStatus(t),e=JSON.parse(__Local._fetchKey(_Keys._app42_defaultDeviceInfo))}else e=this.generateSuperProperties(),__Local._saveKey(_Keys._app42_defaultDeviceInfo,JSON.stringify(e));return e},this.updateDeviceStatus=function(e){var t={},n={};n=JSON.parse(__Local._fetchKey(_Keys._app42_defaultDeviceInfo));for(var o in n)t[o]=n[o];for(var o in e)t[o]=e[o];__Local._saveKey(_Keys._app42_defaultDeviceInfo,JSON.stringify(t))},this.getOldInstallProperties=function(){var e=__Local._fetchKey(_Keys._app42_oldUserProps_+App42.getLoggedInUser());return(null==e||""==e||void 0==e)&&(e='""'),JSON.parse(e)}}).apply(App42EventHandler);var __Local={_checkKey:function(e){var t="";return t=null==this._fetchKey(e)||""==this._fetchKey(e)||void 0==this._fetchKey(e)?"":this._fetchKey(e)},_checkLastCommAt:function(e,t){var n="";return null!=this._fetchKey(e)&&""!=this._fetchKey(e)&&void 0!=this._fetchKey(e)?n=this._fetchKey(e):(n="",n=null==this._fetchKey(t)||""==this._fetchKey(t)||void 0==this._fetchKey(t)?"":this._fetchKey(t))},_saveKey:function(e,t){localStorage.setItem(e,t)},_fetchKey:function(e){return localStorage.getItem(e)},_removeKey:function(e){localStorage.removeItem(e)}},__Installation={_fireInstallEvent:function(e,t){var n=__Local._checkKey(_Keys._app42_isAppInstalled);(null==n||""==n||void 0==n)&&_fireApp42AppInstallEvent(e,t)},_getCurrentLoggedInUserProperties:function(e,t){var n=new App42Event;n.getLoggedInUserProperties({success:function(e){var t=JSON.parse(e),n=t.app42.response.user.app42_userUpdatedOn,o=t.app42.response.user.hasProperties,s=t.app42.response.user.installProperties;"true"==o&&__Local._saveKey(_Keys._app42_oldUserProps_+App42.getLoggedInUser(),JSON.stringify(s)),null!=n&&__Local._saveKey(_Keys._app42_lastUserUpdatedOn_+App42.getLoggedInUser(),n)},error:function(e){}})}},base64_chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",OrderByType={ASCENDING:"ASCENDING",DESCENDING:"DESCENDING"},Base64=function(){var e=76,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=function(e){for(var n={},o=0;64>o;o++)n[t.substr(o,1)]=o;e=e.replace(/\s+/g,"");for(var s,r="",a=new Array,i=e.length,o=0;i>o;o+=4)s=(255&n[e.charAt(o)])<<18,s|=(255&n[e.charAt(o+1)])<<12,s|=(255&n[e.charAt(o+2)])<<6,s|=(255&n[e.charAt(o+3)])<<0,r+=String.fromCharCode((16711680&s)>>16),"="!=e.charAt(o+2)&&(r+=String.fromCharCode((65280&s)>>8)),"="!=e.charAt(o+3)&&(r+=String.fromCharCode((255&s)>>0)),r.length>1024&&(a.push(r),r="");r.length>0&&a.push(r);for(var p=new Array;a.length>1;){for(var l=a.length,u=0;l>u;u+=2)u+1==l?p.push(a[u]):p.push(""+a[u]+a[u+1]);a=p,p=new Array}return a[0]},o=function(n){for(var o,s,r=new Array,a=0,i="",p=0,i="";n.length>=a+3;)o=(255&n.charCodeAt(a++))<<16|(255&n.charCodeAt(a++))<<8|255&n.charCodeAt(a++),i+=t.charAt((16515072&o)>>18)+t.charAt((258048&o)>>12)+t.charAt((4032&o)>>6)+t.charAt(63&o),p+=4,p>e-3&&(i+="\n",r.push(i),i="",p=0);n.length-a>0&&n.length-a<3&&(s=Boolean(n.length-a-1),o=(255&n.charCodeAt(a++))<<16|(s?(255&n.charCodeAt(a))<<8:0),i+=t.charAt((16515072&o)>>18)+t.charAt((258048&o)>>12)+(s?t.charAt((4032&o)>>6):"=")+"="),r.push(i);for(var l=new Array;r.length>1;){for(var u=r.length,c=0;u>c;c+=2)c+1==u?l.push(r[c]):l.push(""+r[c]+r[c+1]);r=l,l=new Array}return r[0]};return{encode:o,decode:n}}(),Operator={EQUALS:"$eq",NOT_EQUALS:"$ne",GREATER_THAN:"$gt",LESS_THAN:"$lt",GREATER_THAN_EQUALTO:"$gte",LESS_THAN_EQUALTO:"$lte",LIKE:"$lk",AND:"$and",OR:"$or",INLIST:"$in"},GeoOperator={NEAR:"$near",WITHIN:"$within"};!function(e){function t(e,t,p){var l=0,u=[0],c="",d=null,c=p||"UTF8";if("UTF8"!==c&&"UTF16"!==c)throw"encoding must be UTF8 or UTF16";if("HEX"===t){if(0!==e.length%2)throw"srcString of HEX type must be in byte increments";d=o(e),l=d.binLen,u=d.value}else if("ASCII"===t||"TEXT"===t)d=n(e,c),l=d.binLen,u=d.value;else{if("B64"!==t)throw"inputFormat must be HEX, TEXT, ASCII, or B64";d=s(e),l=d.binLen,u=d.value}this.getHash=function(e,t,n,o){var s,p=null,c=u.slice(),d=l;if(3===arguments.length?"number"!=typeof n&&(o=n,n=1):2===arguments.length&&(n=1),n!==parseInt(n,10)||1>n)throw"numRounds must a integer >= 1";switch(t){case"HEX":p=r;break;case"B64":p=a;break;default:throw"format must be HEX or B64"}if("SHA-1"!==e)throw"Chosen SHA variant is not supported";for(s=0;n>s;s++)c=v(c,d),d=160;return p(c,i(o))},this.getHMAC=function(e,t,p,d,h){var f,y,m,g,R=[],C=[];switch(f=null,d){case"HEX":d=r;break;case"B64":d=a;break;default:throw"outputFormat must be HEX or B64"}if("SHA-1"!==p)throw"Chosen SHA variant is not supported";if(y=64,g=160,"HEX"===t)f=o(e),m=f.binLen,f=f.value;else if("ASCII"===t||"TEXT"===t)f=n(e,c),m=f.binLen,f=f.value;else{if("B64"!==t)throw"inputFormat must be HEX, TEXT, ASCII, or B64";f=s(e),m=f.binLen,f=f.value}if(e=8*y,t=y/4-1,m/8>y){if("SHA-1"!==p)throw"Unexpected error in HMAC implementation";f=v(f,m),f[t]&=4294967040}else y>m/8&&(f[t]&=4294967040);for(y=0;t>=y;y+=1)R[y]=909522486^f[y],C[y]=1549556828^f[y];if("SHA-1"!==p)throw"Unexpected error in HMAC implementation";return p=v(C.concat(v(R.concat(u),e+l)),e+g),d(p,i(h))}}function n(e,t){var n,o,s=[],r=[],a=0;if("UTF8"===t)for(o=0;o<e.length;o+=1)for(n=e.charCodeAt(o),r=[],n>2048?(r[0]=224|(61440&n)>>>12,r[1]=128|(4032&n)>>>6,r[2]=128|63&n):n>128?(r[0]=192|(1984&n)>>>6,r[1]=128|63&n):r[0]=n,n=0;n<r.length;n+=1)s[a>>>2]|=r[n]<<24-a%4*8,a+=1;else if("UTF16"===t)for(o=0;o<e.length;o+=1)s[a>>>2]|=e.charCodeAt(o)<<16-a%4*8,a+=2;return{value:s,binLen:8*a}}function o(e){var t,n,o=[],s=e.length;if(0!==s%2)throw"String of HEX type must be in byte increments";for(t=0;s>t;t+=2){if(n=parseInt(e.substr(t,2),16),isNaN(n))throw"String of HEX type contains invalid characters";o[t>>>3]|=n<<24-t%8*4}return{value:o,binLen:4*s}}function s(e){var t,n,o,s,r,a=[],i=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw"Invalid character in base-64 string";if(t=e.indexOf("="),e=e.replace(/\=/g,""),-1!==t&&t<e.length)throw"Invalid '=' found in base-64 string";for(n=0;n<e.length;n+=4){for(r=e.substr(n,4),o=s=0;o<r.length;o+=1)t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(r[o]),s|=t<<18-6*o;for(o=0;o<r.length-1;o+=1)a[i>>2]|=(s>>>16-8*o&255)<<24-i%4*8,i+=1}return{value:a,binLen:8*i}}function r(e,t){var n,o,s="",r=4*e.length;for(n=0;r>n;n+=1)o=e[n>>>2]>>>8*(3-n%4),s+="0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(15&o);return t.outputUpper?s.toUpperCase():s}function a(e,t){var n,o,s,r="",a=4*e.length;for(n=0;a>n;n+=3)for(s=(e[n>>>2]>>>8*(3-n%4)&255)<<16|(e[n+1>>>2]>>>8*(3-(n+1)%4)&255)<<8|e[n+2>>>2]>>>8*(3-(n+2)%4)&255,o=0;4>o;o+=1)r=8*n+6*o<=32*e.length?r+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s>>>6*(3-o)&63):r+t.b64Pad;return r}function i(e){var t={outputUpper:!1,b64Pad:"="};try{e.hasOwnProperty("outputUpper")&&(t.outputUpper=e.outputUpper),e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad)}catch(n){}if("boolean"!=typeof t.outputUpper)throw"Invalid outputUpper formatting option";if("string"!=typeof t.b64Pad)throw"Invalid b64Pad formatting option";return t}function p(e,t){return e<<t|e>>>32-t}function l(e,t,n){return e^t^n}function u(e,t,n){return e&t^~e&n}function c(e,t,n){return e&t^e&n^t&n}function d(e,t){var n=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(n>>>16)&65535)<<16|65535&n}function h(e,t,n,o,s){var r=(65535&e)+(65535&t)+(65535&n)+(65535&o)+(65535&s);return((e>>>16)+(t>>>16)+(n>>>16)+(o>>>16)+(s>>>16)+(r>>>16)&65535)<<16|65535&r}function v(e,t){var n,o,s,r,a,i,v,f,y,m=[],g=u,R=l,C=c,b=p,S=d,A=h,_=[1732584193,4023233417,2562383102,271733878,3285377520];for(e[t>>>5]|=128<<24-t%32,e[(t+65>>>9<<4)+15]=t,y=e.length,v=0;y>v;v+=16){for(n=_[0],o=_[1],s=_[2],r=_[3],a=_[4],f=0;80>f;f+=1)m[f]=16>f?e[f+v]:b(m[f-3]^m[f-8]^m[f-14]^m[f-16],1),i=20>f?A(b(n,5),g(o,s,r),a,1518500249,m[f]):40>f?A(b(n,5),R(o,s,r),a,1859775393,m[f]):60>f?A(b(n,5),C(o,s,r),a,2400959708,m[f]):A(b(n,5),R(o,s,r),a,3395469782,m[f]),a=r,r=s,s=b(o,30),o=n,n=i;_[0]=S(n,_[0]),_[1]=S(o,_[1]),_[2]=S(s,_[2]),_[3]=S(r,_[3]),_[4]=S(a,_[4])}return _}"function"==typeof define?define(function(){return t}):"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports?module.exports=exports=t:exports=t:e.jsSHA=t}(this);